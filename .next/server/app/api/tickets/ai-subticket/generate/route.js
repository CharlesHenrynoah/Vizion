/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/tickets/ai-subticket/generate/route";
exports.ids = ["app/api/tickets/ai-subticket/generate/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "perf_hooks":
/*!*****************************!*\
  !*** external "perf_hooks" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("perf_hooks");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftickets%2Fai-subticket%2Fgenerate%2Froute&page=%2Fapi%2Ftickets%2Fai-subticket%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftickets%2Fai-subticket%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftickets%2Fai-subticket%2Fgenerate%2Froute&page=%2Fapi%2Ftickets%2Fai-subticket%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftickets%2Fai-subticket%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_charles_henrynoah_Desktop_vizion_Vizion_app_api_tickets_ai_subticket_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/tickets/ai-subticket/generate/route.ts */ \"(rsc)/./app/api/tickets/ai-subticket/generate/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/tickets/ai-subticket/generate/route\",\n        pathname: \"/api/tickets/ai-subticket/generate\",\n        filename: \"route\",\n        bundlePath: \"app/api/tickets/ai-subticket/generate/route\"\n    },\n    resolvedPagePath: \"/Users/charles-henrynoah/Desktop/vizion/Vizion/app/api/tickets/ai-subticket/generate/route.ts\",\n    nextConfigOutput,\n    userland: _Users_charles_henrynoah_Desktop_vizion_Vizion_app_api_tickets_ai_subticket_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZ0aWNrZXRzJTJGYWktc3VidGlja2V0JTJGZ2VuZXJhdGUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnRpY2tldHMlMkZhaS1zdWJ0aWNrZXQlMkZnZW5lcmF0ZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnRpY2tldHMlMkZhaS1zdWJ0aWNrZXQlMkZnZW5lcmF0ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmNoYXJsZXMtaGVucnlub2FoJTJGRGVza3RvcCUyRnZpemlvbiUyRlZpemlvbiUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZjaGFybGVzLWhlbnJ5bm9haCUyRkRlc2t0b3AlMkZ2aXppb24lMkZWaXppb24maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQzZDO0FBQzFIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvY2hhcmxlcy1oZW5yeW5vYWgvRGVza3RvcC92aXppb24vVml6aW9uL2FwcC9hcGkvdGlja2V0cy9haS1zdWJ0aWNrZXQvZ2VuZXJhdGUvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3RpY2tldHMvYWktc3VidGlja2V0L2dlbmVyYXRlL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdGlja2V0cy9haS1zdWJ0aWNrZXQvZ2VuZXJhdGVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3RpY2tldHMvYWktc3VidGlja2V0L2dlbmVyYXRlL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2NoYXJsZXMtaGVucnlub2FoL0Rlc2t0b3Avdml6aW9uL1Zpemlvbi9hcHAvYXBpL3RpY2tldHMvYWktc3VidGlja2V0L2dlbmVyYXRlL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftickets%2Fai-subticket%2Fgenerate%2Froute&page=%2Fapi%2Ftickets%2Fai-subticket%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftickets%2Fai-subticket%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-action-entry-loader.js?actions=%5B%5B%22%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion%2Fapp%2Factions%2Fgemini-integration.ts%22%2C%5B%5B%2240ca63b7f481f0a4637d6703757ade11dbc432b33f%22%2C%22generateWithGemini%22%5D%2C%5B%2260348a3d22f5fdc032b6f0c5e9a206f41ba92c7613%22%2C%22generateProjectTicketsFormatted%22%5D%2C%5B%2260e43038304b949708f931d67e30ae56439d80a131%22%2C%22enhanceProjectDescription%22%5D%2C%5B%2260f5a7114ae525e767818b612bb897003e4c41d417%22%2C%22generateProjectTickets%22%5D%2C%5B%22702fa7f27033e51b684cce0d176a6f8525bec0b0d4%22%2C%22generateSubTicketWithAI%22%5D%2C%5B%22709c1ed9de5d27665d21214e67e5e216b62062f6e3%22%2C%22generateFeatureIdeas%22%5D%2C%5B%2270fe2b21fda754924c839b23a029c64c76a56780ef%22%2C%22createProjectTicketsInDB%22%5D%5D%5D%5D&__client_imported__=!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-action-entry-loader.js?actions=%5B%5B%22%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion%2Fapp%2Factions%2Fgemini-integration.ts%22%2C%5B%5B%2240ca63b7f481f0a4637d6703757ade11dbc432b33f%22%2C%22generateWithGemini%22%5D%2C%5B%2260348a3d22f5fdc032b6f0c5e9a206f41ba92c7613%22%2C%22generateProjectTicketsFormatted%22%5D%2C%5B%2260e43038304b949708f931d67e30ae56439d80a131%22%2C%22enhanceProjectDescription%22%5D%2C%5B%2260f5a7114ae525e767818b612bb897003e4c41d417%22%2C%22generateProjectTickets%22%5D%2C%5B%22702fa7f27033e51b684cce0d176a6f8525bec0b0d4%22%2C%22generateSubTicketWithAI%22%5D%2C%5B%22709c1ed9de5d27665d21214e67e5e216b62062f6e3%22%2C%22generateFeatureIdeas%22%5D%2C%5B%2270fe2b21fda754924c839b23a029c64c76a56780ef%22%2C%22createProjectTicketsInDB%22%5D%5D%5D%5D&__client_imported__=! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"40ca63b7f481f0a4637d6703757ade11dbc432b33f\": () => (/* reexport safe */ _Users_charles_henrynoah_Desktop_vizion_Vizion_app_actions_gemini_integration_ts__WEBPACK_IMPORTED_MODULE_0__.generateWithGemini),\n/* harmony export */   \"60348a3d22f5fdc032b6f0c5e9a206f41ba92c7613\": () => (/* reexport safe */ _Users_charles_henrynoah_Desktop_vizion_Vizion_app_actions_gemini_integration_ts__WEBPACK_IMPORTED_MODULE_0__.generateProjectTicketsFormatted),\n/* harmony export */   \"60e43038304b949708f931d67e30ae56439d80a131\": () => (/* reexport safe */ _Users_charles_henrynoah_Desktop_vizion_Vizion_app_actions_gemini_integration_ts__WEBPACK_IMPORTED_MODULE_0__.enhanceProjectDescription),\n/* harmony export */   \"60f5a7114ae525e767818b612bb897003e4c41d417\": () => (/* reexport safe */ _Users_charles_henrynoah_Desktop_vizion_Vizion_app_actions_gemini_integration_ts__WEBPACK_IMPORTED_MODULE_0__.generateProjectTickets),\n/* harmony export */   \"702fa7f27033e51b684cce0d176a6f8525bec0b0d4\": () => (/* reexport safe */ _Users_charles_henrynoah_Desktop_vizion_Vizion_app_actions_gemini_integration_ts__WEBPACK_IMPORTED_MODULE_0__.generateSubTicketWithAI),\n/* harmony export */   \"709c1ed9de5d27665d21214e67e5e216b62062f6e3\": () => (/* reexport safe */ _Users_charles_henrynoah_Desktop_vizion_Vizion_app_actions_gemini_integration_ts__WEBPACK_IMPORTED_MODULE_0__.generateFeatureIdeas),\n/* harmony export */   \"70fe2b21fda754924c839b23a029c64c76a56780ef\": () => (/* reexport safe */ _Users_charles_henrynoah_Desktop_vizion_Vizion_app_actions_gemini_integration_ts__WEBPACK_IMPORTED_MODULE_0__.createProjectTicketsInDB)\n/* harmony export */ });\n/* harmony import */ var _Users_charles_henrynoah_Desktop_vizion_Vizion_app_actions_gemini_integration_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app/actions/gemini-integration.ts */ \"(rsc)/./app/actions/gemini-integration.ts\");\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1hY3Rpb24tZW50cnktbG9hZGVyLmpzP2FjdGlvbnM9JTVCJTVCJTIyJTJGVXNlcnMlMkZjaGFybGVzLWhlbnJ5bm9haCUyRkRlc2t0b3AlMkZ2aXppb24lMkZWaXppb24lMkZhcHAlMkZhY3Rpb25zJTJGZ2VtaW5pLWludGVncmF0aW9uLnRzJTIyJTJDJTVCJTVCJTIyNDBjYTYzYjdmNDgxZjBhNDYzN2Q2NzAzNzU3YWRlMTFkYmM0MzJiMzNmJTIyJTJDJTIyZ2VuZXJhdGVXaXRoR2VtaW5pJTIyJTVEJTJDJTVCJTIyNjAzNDhhM2QyMmY1ZmRjMDMyYjZmMGM1ZTlhMjA2ZjQxYmE5MmM3NjEzJTIyJTJDJTIyZ2VuZXJhdGVQcm9qZWN0VGlja2V0c0Zvcm1hdHRlZCUyMiU1RCUyQyU1QiUyMjYwZTQzMDM4MzA0Yjk0OTcwOGY5MzFkNjdlMzBhZTU2NDM5ZDgwYTEzMSUyMiUyQyUyMmVuaGFuY2VQcm9qZWN0RGVzY3JpcHRpb24lMjIlNUQlMkMlNUIlMjI2MGY1YTcxMTRhZTUyNWU3Njc4MThiNjEyYmI4OTcwMDNlNGM0MWQ0MTclMjIlMkMlMjJnZW5lcmF0ZVByb2plY3RUaWNrZXRzJTIyJTVEJTJDJTVCJTIyNzAyZmE3ZjI3MDMzZTUxYjY4NGNjZTBkMTc2YTZmODUyNWJlYzBiMGQ0JTIyJTJDJTIyZ2VuZXJhdGVTdWJUaWNrZXRXaXRoQUklMjIlNUQlMkMlNUIlMjI3MDljMWVkOWRlNWQyNzY2NWQyMTIxNGU2N2U1ZTIxNmI2MjA2MmY2ZTMlMjIlMkMlMjJnZW5lcmF0ZUZlYXR1cmVJZGVhcyUyMiU1RCUyQyU1QiUyMjcwZmUyYjIxZmRhNzU0OTI0YzgzOWIyM2EwMjljNjRjNzZhNTY3ODBlZiUyMiUyQyUyMmNyZWF0ZVByb2plY3RUaWNrZXRzSW5EQiUyMiU1RCU1RCU1RCU1RCZfX2NsaWVudF9pbXBvcnRlZF9fPSEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQ3FLO0FBQ2E7QUFDTjtBQUNIO0FBQ0M7QUFDSDtBQUNJIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiXG5leHBvcnQgeyBnZW5lcmF0ZVdpdGhHZW1pbmkgYXMgXCI0MGNhNjNiN2Y0ODFmMGE0NjM3ZDY3MDM3NTdhZGUxMWRiYzQzMmIzM2ZcIiB9IGZyb20gXCIvVXNlcnMvY2hhcmxlcy1oZW5yeW5vYWgvRGVza3RvcC92aXppb24vVml6aW9uL2FwcC9hY3Rpb25zL2dlbWluaS1pbnRlZ3JhdGlvbi50c1wiXG5leHBvcnQgeyBnZW5lcmF0ZVByb2plY3RUaWNrZXRzRm9ybWF0dGVkIGFzIFwiNjAzNDhhM2QyMmY1ZmRjMDMyYjZmMGM1ZTlhMjA2ZjQxYmE5MmM3NjEzXCIgfSBmcm9tIFwiL1VzZXJzL2NoYXJsZXMtaGVucnlub2FoL0Rlc2t0b3Avdml6aW9uL1Zpemlvbi9hcHAvYWN0aW9ucy9nZW1pbmktaW50ZWdyYXRpb24udHNcIlxuZXhwb3J0IHsgZW5oYW5jZVByb2plY3REZXNjcmlwdGlvbiBhcyBcIjYwZTQzMDM4MzA0Yjk0OTcwOGY5MzFkNjdlMzBhZTU2NDM5ZDgwYTEzMVwiIH0gZnJvbSBcIi9Vc2Vycy9jaGFybGVzLWhlbnJ5bm9haC9EZXNrdG9wL3Zpemlvbi9WaXppb24vYXBwL2FjdGlvbnMvZ2VtaW5pLWludGVncmF0aW9uLnRzXCJcbmV4cG9ydCB7IGdlbmVyYXRlUHJvamVjdFRpY2tldHMgYXMgXCI2MGY1YTcxMTRhZTUyNWU3Njc4MThiNjEyYmI4OTcwMDNlNGM0MWQ0MTdcIiB9IGZyb20gXCIvVXNlcnMvY2hhcmxlcy1oZW5yeW5vYWgvRGVza3RvcC92aXppb24vVml6aW9uL2FwcC9hY3Rpb25zL2dlbWluaS1pbnRlZ3JhdGlvbi50c1wiXG5leHBvcnQgeyBnZW5lcmF0ZVN1YlRpY2tldFdpdGhBSSBhcyBcIjcwMmZhN2YyNzAzM2U1MWI2ODRjY2UwZDE3NmE2Zjg1MjViZWMwYjBkNFwiIH0gZnJvbSBcIi9Vc2Vycy9jaGFybGVzLWhlbnJ5bm9haC9EZXNrdG9wL3Zpemlvbi9WaXppb24vYXBwL2FjdGlvbnMvZ2VtaW5pLWludGVncmF0aW9uLnRzXCJcbmV4cG9ydCB7IGdlbmVyYXRlRmVhdHVyZUlkZWFzIGFzIFwiNzA5YzFlZDlkZTVkMjc2NjVkMjEyMTRlNjdlNWUyMTZiNjIwNjJmNmUzXCIgfSBmcm9tIFwiL1VzZXJzL2NoYXJsZXMtaGVucnlub2FoL0Rlc2t0b3Avdml6aW9uL1Zpemlvbi9hcHAvYWN0aW9ucy9nZW1pbmktaW50ZWdyYXRpb24udHNcIlxuZXhwb3J0IHsgY3JlYXRlUHJvamVjdFRpY2tldHNJbkRCIGFzIFwiNzBmZTJiMjFmZGE3NTQ5MjRjODM5YjIzYTAyOWM2NGM3NmE1Njc4MGVmXCIgfSBmcm9tIFwiL1VzZXJzL2NoYXJsZXMtaGVucnlub2FoL0Rlc2t0b3Avdml6aW9uL1Zpemlvbi9hcHAvYWN0aW9ucy9nZW1pbmktaW50ZWdyYXRpb24udHNcIlxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-action-entry-loader.js?actions=%5B%5B%22%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion%2Fapp%2Factions%2Fgemini-integration.ts%22%2C%5B%5B%2240ca63b7f481f0a4637d6703757ade11dbc432b33f%22%2C%22generateWithGemini%22%5D%2C%5B%2260348a3d22f5fdc032b6f0c5e9a206f41ba92c7613%22%2C%22generateProjectTicketsFormatted%22%5D%2C%5B%2260e43038304b949708f931d67e30ae56439d80a131%22%2C%22enhanceProjectDescription%22%5D%2C%5B%2260f5a7114ae525e767818b612bb897003e4c41d417%22%2C%22generateProjectTickets%22%5D%2C%5B%22702fa7f27033e51b684cce0d176a6f8525bec0b0d4%22%2C%22generateSubTicketWithAI%22%5D%2C%5B%22709c1ed9de5d27665d21214e67e5e216b62062f6e3%22%2C%22generateFeatureIdeas%22%5D%2C%5B%2270fe2b21fda754924c839b23a029c64c76a56780ef%22%2C%22createProjectTicketsInDB%22%5D%5D%5D%5D&__client_imported__=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/actions/gemini-integration.ts":
/*!*******************************************!*\
  !*** ./app/actions/gemini-integration.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createProjectTicketsInDB: () => (/* binding */ createProjectTicketsInDB),\n/* harmony export */   enhanceProjectDescription: () => (/* binding */ enhanceProjectDescription),\n/* harmony export */   generateFeatureIdeas: () => (/* binding */ generateFeatureIdeas),\n/* harmony export */   generateProjectTickets: () => (/* binding */ generateProjectTickets),\n/* harmony export */   generateProjectTicketsFormatted: () => (/* binding */ generateProjectTicketsFormatted),\n/* harmony export */   generateSubTicketWithAI: () => (/* binding */ generateSubTicketWithAI),\n/* harmony export */   generateWithGemini: () => (/* binding */ generateWithGemini)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-server-reference */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! private-next-rsc-action-encryption */ \"(rsc)/./node_modules/next/dist/server/app-render/encryption.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-rsc-action-validate */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js\");\n/* __next_internal_action_entry_do_not_use__ {\"40ca63b7f481f0a4637d6703757ade11dbc432b33f\":\"generateWithGemini\",\"60348a3d22f5fdc032b6f0c5e9a206f41ba92c7613\":\"generateProjectTicketsFormatted\",\"60e43038304b949708f931d67e30ae56439d80a131\":\"enhanceProjectDescription\",\"60f5a7114ae525e767818b612bb897003e4c41d417\":\"generateProjectTickets\",\"702fa7f27033e51b684cce0d176a6f8525bec0b0d4\":\"generateSubTicketWithAI\",\"709c1ed9de5d27665d21214e67e5e216b62062f6e3\":\"generateFeatureIdeas\",\"70fe2b21fda754924c839b23a029c64c76a56780ef\":\"createProjectTicketsInDB\"} */ \n\n\n// Cette fonction doit être exécutée uniquement côté serveur\nasync function /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ generateWithGemini(prompt) {\n    try {\n        // Initialiser l'API Gemini avec la clé API\n        const genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_2__.GoogleGenerativeAI(process.env.GOOGLE_AI_API_KEY || \"\");\n        // Accéder au modèle Gemini 2.0 Flash\n        const model = genAI.getGenerativeModel({\n            model: \"gemini-2.0-flash\"\n        });\n        // Générer du contenu\n        const result = await model.generateContent(prompt);\n        const response = await result.response;\n        return response.text();\n    } catch (error) {\n        console.error(\"Erreur lors de la génération avec Gemini:\", error);\n        return \"Une erreur s'est produite lors de la génération de contenu.\";\n    }\n}\n// Fonction pour améliorer la description d'un projet\nasync function /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ enhanceProjectDescription(projectName, inspirations) {\n    const prompt = `\n    Create a functional description for a project inspired by: \"${inspirations}\".\n    \n    Instructions:\n    1. Imagine this project as a hybrid that combines the best features from all the inspirations mentioned.\n    2. Describe 3-5 key innovative features that would make this project stand out.\n    3. Focus on functionality, user experience, and technical capabilities.\n    4. Keep the tone professional but engaging.\n    5. The description must be in English.\n    6. Limit your response to exactly 500 characters.\n    7. DO NOT include any prefixes, labels, or formatting - just output the pure description text.\n    8. DO NOT start with the project name or \"AI:\" or any other prefix.\n    9. DO NOT use bullet points or numbered lists.\n    \n    Output only the project description as a continuous paragraph with no additional commentary.\n  `;\n    return generateWithGemini(prompt);\n}\n// Fonction pour générer des idées de fonctionnalités\nasync function /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ generateFeatureIdeas(projectName, projectDescription, count = 5) {\n    const prompt = `\n    Generate ${count} feature ideas for a project named \"${projectName}\" \n    with the description:\n    \n    \"${projectDescription}\"\n    \n    For each feature:\n    1. Provide a short, catchy title (3-5 words)\n    2. Write a concise description (15-20 words)\n    3. Focus on practical functionality that users would value\n    4. All content must be in English\n    \n    Format your response as a JSON array:\n    [\n      {\n        \"title\": \"Feature Title 1\",\n        \"description\": \"Concise description of feature 1\"\n      },\n      ...\n    ]\n  `;\n    try {\n        const response = await generateWithGemini(prompt);\n        const features = JSON.parse(response);\n        return features.map((feature)=>`${feature.title}: ${feature.description}`);\n    } catch (error) {\n        console.error(\"Erreur lors du parsing des idées de fonctionnalités:\", error);\n        return [\n            \"Error generating feature ideas.\"\n        ];\n    }\n}\n// Fonction pour générer des tickets de projet\nasync function /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ generateProjectTickets(projectName, projectDescription) {\n    const prompt = `\n    Tu es un assistant expert en planification de projets logiciels, spécialisé dans la création de tâches pour des IA IDE qui génèrent du code React. Tu dois décomposer la description de projet fournie en une structure détaillée de tickets et sous-tickets.\n\n    **Projet à planifier :**\n    Nom: \"${projectName}\"\n    Description: \"${projectDescription}\"\n    \n    **Contraintes de Rédaction Essentielles :**\n\n    Format Strict et Obligatoire :\n    - Chaque ticket principal (epic) doit avoir un titre commençant par un emoji suivi de \"EPIC [Num] - [Titre]\"\n    - La description de chaque epic doit commencer par \"Objectif : \" suivi d'un texte explicatif\n    - Les sous-tickets doivent avoir un format \"Ticket [Num Epic].[Num Ticket] ([Type]) : [Titre]\"\n    - Privilégier les descriptions détaillées sous forme de liste à puces (-)\n\n    Types de Fonctionnalités à Couvrir :\n    1. **Core Features** : Fonctionnalités principales spécifiques au projet décrit\n    2. **Authentification** : Système de login/signup, gestion des sessions, profils utilisateurs\n    3. **Abonnements/Paiements** : Plans d'abonnement, intégration de paiement, gestion des factures \n    4. **Features Transversales** : Notifications, préférences utilisateur, thèmes, internationalisation\n\n    Focus Exclusif Frontend React :\n    - Décrire uniquement ce qui se passe dans le navigateur, côté client\n    - Se concentrer sur les composants React, leur état, les interactions utilisateur et la navigation\n    \n    API comme Boîte Noire Externe :\n    - Décrire les API uniquement du point de vue du frontend\n    - Inclure la méthode HTTP, l'URL, les données envoyées/reçues et comment l'interface réagit\n\n    Spécificité React :\n    - Mentionner explicitement les noms des composants React à utiliser\n    \n    Types de Tickets Restreints :\n    - Utiliser uniquement les types suivants : (React), (API Intégration), (React UI), (React Routing), (React State/Context), (Frontend Best Practices), (Auth), (Subscription), (UX/UI)\n    \n    **Structure à produire :**\n    \n    Prépare exactement 7-9 tickets principaux (EPIC), dont :\n    - 4-5 EPICs pour les Core Features du projet\n    - 1-2 EPICs pour l'authentification et profil utilisateur\n    - 1 EPIC pour les abonnements et paiements (si pertinent pour le projet)\n    - 1-2 EPICs pour les fonctionnalités transversales (notifications, préférences, etc.)\n    \n    Chaque EPIC devrait contenir 4-6 sous-tickets.\n    \n    TRÈS IMPORTANT: Tu dois générer AU MINIMUM 10 tickets au total (EPICs + sous-tickets).\n    \n    Pour chaque ticket principal (EPIC) :\n    - Un titre au format \"[Emoji] EPIC [Num] - [Titre]\"\n    - Une description débutant par \"Objectif : \" \n    - Un statut qui DOIT être \"To Do\"\n    - Une priorité (1 à 3, où 1 est la plus élevée)\n    \n    Pour chaque sous-ticket :\n    - Un titre spécifique au format \"Ticket [Num Epic].[Num Ticket] ([Type]) : [Titre]\"\n    - Une description détaillée incluant :\n      * Le composant React à créer/modifier\n      * Les props nécessaires et l'état géré\n      * Les interactions utilisateur\n      * L'appel API exact si pertinent\n      * Comment l'UI réagit\n      * Les éléments UI clés et bibliothèques suggérées\n    - Un statut qui DOIT être \"To Do\"\n    - Une priorité (1 à 3)\n    \n    **Format de sortie (JSON) :**\n    [\n      {\n        \"title\": \"[Emoji] EPIC 1 - [Fonctionnalité principale]\",\n        \"description\": \"Objectif : Description détaillée de cette fonctionnalité majeure...\",\n        \"status\": \"To Do\",\n        \"priority\": 1,\n        \"subTickets\": [\n          {\n            \"title\": \"Ticket 1.1 (React UI) : Développer [composant spécifique]\",\n            \"description\": \"- Crée le composant React \\`ComposantName\\`\\\\n- Utilise useState pour gérer l'état X\\\\n- Implemente les interactions utilisateur suivantes...\\\\n- Appelle l'API \\`GET /api/resource\\`\\\\n- Affiche les données avec une UI responsive\\\\n- Utilise la bibliothèque X pour Y\",\n            \"status\": \"To Do\",\n            \"priority\": 2\n          },\n          {\n            \"title\": \"Ticket 1.2 (API Intégration) : Intégrer [autre aspect]\",\n            \"description\": \"Description technique détaillée...\",\n            \"status\": \"To Do\",\n            \"priority\": 1\n          }\n        ]\n      }\n    ]\n    \n    IMPORTANT :\n    - Tous les tickets et sous-tickets DOIVENT avoir le statut \"To Do\"\n    - Les titres des tickets principaux DOIVENT commencer par un emoji puis \"EPIC [Num] - \"\n    - Les titres des sous-tickets DOIVENT suivre le format \"Ticket [Num Epic].[Num Ticket] ([Type]) : [Titre]\"\n    - Les descriptions DOIVENT être en français et inclure des puces (-)\n    - Les descriptions DOIVENT être suffisamment détaillées pour qu'une IA génératrice de code puisse implémenter la fonctionnalité\n    - N'inclus PAS d'autres informations que le JSON demandé dans ta réponse\n  `;\n    try {\n        const response = await generateWithGemini(prompt);\n        // Nettoyer la réponse de tout texte supplémentaire et garder uniquement le JSON\n        const jsonMatch = response.match(/\\[[\\s\\S]*\\]/);\n        if (!jsonMatch) {\n            console.error(\"Erreur: Impossible de trouver le JSON dans la réponse de Gemini\");\n            return [];\n        }\n        const cleanJson = jsonMatch[0];\n        const tickets = JSON.parse(cleanJson);\n        // S'assurer que tous les tickets sont en statut \"To Do\"\n        let processedTickets = tickets.map((ticket)=>{\n            // Forcer le statut \"To Do\" pour tous les tickets\n            ticket.status = \"To Do\";\n            // Assurer une priorité valide\n            if (!ticket.priority || ticket.priority < 1 || ticket.priority > 3) {\n                ticket.priority = Math.floor(Math.random() * 3) + 1;\n            }\n            // Traiter les sous-tickets\n            if (ticket.subTickets && Array.isArray(ticket.subTickets)) {\n                ticket.subTickets = ticket.subTickets.map((subTicket)=>{\n                    subTicket.status = \"To Do\";\n                    if (!subTicket.priority || subTicket.priority < 1 || subTicket.priority > 3) {\n                        subTicket.priority = Math.floor(Math.random() * 3) + 1;\n                    }\n                    return subTicket;\n                });\n            } else {\n                ticket.subTickets = [];\n            }\n            return ticket;\n        });\n        // Réorganiser les tickets pour que les épics d'authentification et profil utilisateur soient toujours en dernier\n        const authAndProfileEpics = [];\n        const otherEpics = [];\n        processedTickets.forEach((ticket)=>{\n            // Vérifier si le ticket est lié à l'authentification ou au profil utilisateur\n            if (ticket.title.toLowerCase().includes(\"auth\") || ticket.title.toLowerCase().includes(\"authentification\") || ticket.title.toLowerCase().includes(\"login\") || ticket.title.toLowerCase().includes(\"connexion\") || ticket.title.toLowerCase().includes(\"profil\") || ticket.title.toLowerCase().includes(\"profile\") || ticket.title.toLowerCase().includes(\"utilisateur\") || ticket.title.toLowerCase().includes(\"user\") || ticket.title.toLowerCase().includes(\"préférences\") || ticket.title.toLowerCase().includes(\"preferences\") || ticket.description.toLowerCase().includes(\"authentification\") || ticket.description.toLowerCase().includes(\"profil utilisateur\")) {\n                authAndProfileEpics.push(ticket);\n            } else {\n                otherEpics.push(ticket);\n            }\n        });\n        // Combiner les deux listes avec les épics d'authentification et profil en dernier\n        return [\n            ...otherEpics,\n            ...authAndProfileEpics\n        ];\n    } catch (error) {\n        console.error(\"Erreur lors du parsing des tickets de projet:\", error);\n        return [];\n    }\n}\n// Fonction pour générer des tickets de projet avec format strict\nasync function /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ generateProjectTicketsFormatted(projectName, projectDescription) {\n    const prompt = `\n    Tu es un assistant expert en planification de projets React, spécialisé dans la création de tickets suivant un format strict. Tu dois décomposer la description de projet fournie en une structure détaillée d'epics et de tickets.\n\n    **Projet à planifier :**\n    Nom: \"${projectName}\"\n    Description: \"${projectDescription}\"\n    \n    **Contraintes de Rédaction Essentielles :**\n\n    Format Strict et Obligatoire :\n    - Utiliser exactement la structure : [Emoji] EPIC [Num] – [Titre] suivi de Objectif : [Description].\n    - Puis, pour chaque ticket : Ticket [Num Epic].[Num Ticket] ([Type]) : [Titre] suivi de descriptions détaillées sous forme de liste à puces (-).\n    - Aucune déviation de ce format (majuscules, tirets, parenthèses, emojis, retours à la ligne).\n\n    Focus Exclusif Frontend React :\n    - Décrire uniquement ce qui se passe dans le navigateur, côté client.\n    - Se concentrer sur les composants React, leur état, les interactions utilisateur (clics, formulaires), l'affichage des données et la navigation (React Router).\n\n    API comme Boîte Noire Externe :\n    - Ne JAMAIS décrire l'implémentation du backend, de la base de données ou de la logique interne de l'API.\n    - Décrire les appels API du point de vue du frontend :\n      * Quelle méthode HTTP et quelle URL (hypothétique mais cohérente, ex: GET /api/users/me/profile) sont appelées ?\n      * Quelles données clés sont envoyées (si POST/PUT) ?\n      * Quelles données clés sont attendues en retour ?\n      * Comment l'interface React réagit à la réponse (mise à jour de l'état, affichage, redirection) ?\n      * Inclure la gestion des états de chargement et d'erreur liés aux appels API.\n\n    Spécificité React :\n    - Mentionner explicitement les noms des composants React à créer ou modifier (ex: UserProfileCard).\n    - Décrire l'utilisation de hooks React si pertinent (useState, useEffect...).\n    - Indiquer si une gestion d'état globale (Context API, Zustand, Redux Toolkit) ou une navigation (React Router) est nécessaire.\n\n    Types de Tickets Restreints :\n    - Utiliser uniquement les types suivants entre parenthèses : (React), (API Intégration), (React UI), (React Routing), (React State/Context), (Frontend Best Practices).\n\n    Langage Clair et Actionnable :\n    - Utiliser des verbes d'action clairs (Créer, Afficher, Gérer, Appeler, Mettre à jour, Configurer...).\n    - Être précis et non ambigu.\n    - Décomposer suffisamment les tâches pour qu'un ticket représente une unité de travail logique.\n\n    Détails UI Pertinents :\n    - Mentionner les éléments d'interface utilisateur importants (boutons, formulaires, listes, graphiques, modales, toasts...).\n    - Suggérer des bibliothèques spécifiques (ex: Recharts pour les graphiques, react-toastify pour les notifications, Axios pour les appels API) si cela aide à la clarté.\n    \n    **Structure à produire :**\n    \n    - Créer 4-5 EPICS principaux\n    - Chaque EPIC doit avoir 4-5 tickets\n    - Chaque EPIC doit avoir un emoji thématique approprié\n    - Les tickets doivent aller des fonctionnalités core aux fonctionnalités plus générales\n    - Les tickets doivent couvrir: inscription, connexion, modification de compte, dashboard, présentation du projet, etc.\n    \n    **Ton output doit être EXACTEMENT dans ce format:**\n    \n    [Emoji] EPIC 1 – [Titre Epic 1]\n    Objectif : [Description Epic 1]\n    \n    Ticket 1.1 ([Type]) : [Titre Ticket 1.1]\n    - [Point détaillé 1]\n    - [Point détaillé 2]\n    - [Point détaillé 3]\n    - [Point détaillé 4]\n    - [Point détaillé 5]\n    \n    Ticket 1.2 ([Type]) : [Titre Ticket 1.2]\n    - [Point détaillé 1]\n    - [Point détaillé 2]\n    - [Point détaillé 3]\n    - [Point détaillé 4]\n    - [Point détaillé 5]\n    \n    [Emoji] EPIC 2 – [Titre Epic 2]\n    ...etc\n    \n    IMPORTANT:\n    - N'inclus RIEN d'autre dans ta réponse que le format demandé\n    - N'inclus PAS d'introduction ou de conclusion\n    - N'utilise PAS de numérotation (1., 2., etc.) mais uniquement des tirets (-)\n    - Respecte STRICTEMENT le format demandé sans aucune déviation\n    - Les descriptions doivent être en français\n  `;\n    try {\n        const response = await generateWithGemini(prompt);\n        return response;\n    } catch (error) {\n        console.error(\"Erreur lors de la génération des tickets formatés:\", error);\n        return \"Erreur lors de la génération des tickets formatés. Veuillez réessayer.\";\n    }\n}\n// Fonction pour créer les tickets dans la base de données\nasync function /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ createProjectTicketsInDB(projectId, generatedTickets, userId) {\n    try {\n        // Importer supabaseAdmin directement\n        const { supabaseAdmin } = await Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@supabase\"), __webpack_require__.e(\"vendor-chunks/tr46\"), __webpack_require__.e(\"vendor-chunks/whatwg-url\"), __webpack_require__.e(\"vendor-chunks/webidl-conversions\"), __webpack_require__.e(\"vendor-chunks/drizzle-orm\"), __webpack_require__.e(\"vendor-chunks/postgres\"), __webpack_require__.e(\"_rsc_lib_db_ts\")]).then(__webpack_require__.bind(__webpack_require__, /*! @/lib/db */ \"(rsc)/./lib/db.ts\"));\n        // Récupérer les statuts de tickets\n        const { data: statuses, error: statusError } = await supabaseAdmin.from('ticket_statuses').select('id, name');\n        if (statusError) {\n            console.error('Erreur lors de la récupération des statuts:', statusError);\n            return false;\n        }\n        // Vérifier si les statuts existent, sinon les créer\n        let statusMap = {};\n        if (!statuses || statuses.length === 0) {\n            console.log('Aucun statut trouvé, création des statuts par défaut...');\n            // Créer les statuts par défaut\n            const defaultStatuses = [\n                {\n                    name: 'To Do',\n                    color: '#4287f5',\n                    position: 0\n                },\n                {\n                    name: 'In Progress',\n                    color: '#f5a142',\n                    position: 1\n                },\n                {\n                    name: 'Done',\n                    color: '#42f545',\n                    position: 2\n                }\n            ];\n            for (const status of defaultStatuses){\n                const { data, error } = await supabaseAdmin.from('ticket_statuses').insert(status).select();\n                if (error) {\n                    console.error('Erreur lors de la création du statut:', error);\n                    return false;\n                }\n                if (data && data[0]) {\n                    statusMap[status.name] = data[0].id;\n                }\n            }\n        } else {\n            // Créer une map des status pour les retrouver facilement\n            for (const status of statuses){\n                statusMap[status.name] = status.id;\n            }\n        }\n        // Pour chaque ticket principal (epic)\n        for (const ticket of generatedTickets){\n            // Déterminer le statut\n            const statusId = statusMap[ticket.status] || statusMap['To Do'];\n            // Créer le ticket principal\n            const { data: epicData, error: epicError } = await supabaseAdmin.from('tickets').insert({\n                title: ticket.title,\n                description: ticket.description,\n                project_id: projectId,\n                status_id: statusId,\n                assigned_to: null,\n                created_by: userId,\n                priority: ticket.priority,\n                position: 0\n            }).select();\n            if (epicError) {\n                console.error('Erreur lors de la création du ticket principal:', epicError);\n                continue;\n            }\n            // Si le ticket principal a été créé et qu'il a des sous-tickets\n            if (epicData && epicData[0] && ticket.subTickets && ticket.subTickets.length > 0) {\n                const epicId = epicData[0].id;\n                // Pour chaque sous-ticket\n                for(let i = 0; i < ticket.subTickets.length; i++){\n                    const subTicket = ticket.subTickets[i];\n                    // Déterminer le statut du sous-ticket\n                    const subTicketStatusId = statusMap[subTicket.status] || statusMap['To Do'];\n                    // Créer le sous-ticket\n                    const { error: subTicketError } = await supabaseAdmin.from('tickets').insert({\n                        title: subTicket.title,\n                        description: subTicket.description,\n                        project_id: projectId,\n                        status_id: subTicketStatusId,\n                        assigned_to: null,\n                        created_by: userId,\n                        priority: subTicket.priority,\n                        position: i,\n                        parent_ticket_id: epicId,\n                        is_sub_ticket: true\n                    });\n                    if (subTicketError) {\n                        console.error('Erreur lors de la création du sous-ticket:', subTicketError);\n                    }\n                }\n            }\n        }\n        return true;\n    } catch (error) {\n        console.error(\"Erreur lors de la création des tickets dans la base de données:\", error);\n        return false;\n    }\n}\n// Fonction pour générer un sous-ticket avec IA\nasync function /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ generateSubTicketWithAI(epicTitle, epicDescription, subTicketDescription) {\n    console.log(\"Génération de sous-ticket avec paramètres:\", {\n        epicTitle,\n        epicDescription: epicDescription ? `${epicDescription.substring(0, 30)}...` : \"(vide)\",\n        subTicketDescription: `${subTicketDescription.substring(0, 30)}...`\n    });\n    // Définir une longueur cible pour les descriptions de tickets\n    const TARGET_DESCRIPTION_LENGTH = 500;\n    // La limite maximale reste à 800 caractères\n    const MAX_DESCRIPTION_LENGTH = 800;\n    const prompt = `\n    Je suis un assistant de gestion de projet et j'ai besoin de générer un sous-ticket technique pertinent \n    pour l'epic suivant: \"${epicTitle}\". \n    ${epicDescription ? `Description de l'epic: \"${epicDescription}\"` : ''}\n    \n    Voici la description du sous-ticket que je veux créer: \"${subTicketDescription}\"\n    \n    Génère un sous-ticket technique approprié au format JSON avec les champs suivants:\n    - title: Le titre doit suivre ce format exact: \"Ticket [Num Epic].X (Domaine) : Description concise\". \n      Par exemple \"Ticket 1.3 (Frontend) : Implémenter la validation de formulaire\"\n    - description: Une description technique et actionnable avec des étapes précises\n    - priority: Un nombre entre 1 (basse) et 3 (haute) pour représenter la priorité du ticket\n    \n    IMPORTANT :\n    - Le titre DOIT respecter exactement le format spécifié\n    - La description DOIT être technique, précise et actionnable\n    - La description DOIT faire environ ${TARGET_DESCRIPTION_LENGTH} caractères (entre 450 et 550)\n    - La description NE DOIT JAMAIS dépasser ${MAX_DESCRIPTION_LENGTH} caractères\n    - Fournis uniquement le JSON demandé, sans aucun texte supplémentaire\n  `;\n    try {\n        const response = await generateWithGemini(prompt);\n        if (!response || response.trim() === '') {\n            console.error(\"Erreur: Réponse vide de Gemini\");\n            return null;\n        }\n        console.log(\"Réponse brute de Gemini:\", response.substring(0, 100) + \"...\");\n        // Analyser la réponse JSON\n        let jsonStr = response;\n        // Si la réponse contient du texte avant ou après le JSON, tenter de l'extraire\n        const jsonMatch = response.match(/\\{[\\s\\S]*\\}/);\n        if (jsonMatch) {\n            jsonStr = jsonMatch[0];\n            console.log(\"JSON extrait:\", jsonStr.substring(0, 100) + \"...\");\n        }\n        // Tenter de parser le JSON\n        let ticketData;\n        try {\n            ticketData = JSON.parse(jsonStr);\n            console.log(\"Parsing JSON réussi\");\n        } catch (parseError) {\n            console.error(\"Erreur de parsing JSON:\", parseError);\n            // Tentative de correction du JSON\n            try {\n                // Remplacer les guillemets simples par des guillemets doubles\n                const correctedJson = jsonStr.replace(/'/g, '\"');\n                ticketData = JSON.parse(correctedJson);\n                console.log(\"Parsing JSON réussi après correction\");\n            } catch (secondParseError) {\n                console.error(\"Échec de la correction du JSON:\", secondParseError);\n                console.log(\"JSON incorrect:\", jsonStr);\n                // Créer un objet par défaut si le parsing échoue\n                ticketData = {\n                    title: `Ticket X.X : ${subTicketDescription.substring(0, 50)}...`,\n                    description: `Sous-ticket créé à partir de: ${subTicketDescription.substring(0, 400)}`,\n                    priority: 2\n                };\n                console.log(\"Utilisation d'un objet par défaut\");\n            }\n        }\n        // Vérifier les champs requis\n        if (!ticketData.title) {\n            console.warn(\"Titre manquant dans la réponse, création d'un titre par défaut\");\n            ticketData.title = `Ticket X.X : ${subTicketDescription.substring(0, 50)}...`;\n        }\n        if (!ticketData.description) {\n            console.warn(\"Description manquante dans la réponse, création d'une description par défaut\");\n            ticketData.description = `Sous-ticket créé à partir de: ${subTicketDescription.substring(0, 400)}`;\n        }\n        // Extraire le numéro d'epic du titre\n        const epicNumberMatch = epicTitle.match(/EPIC\\s+(\\d+)/i);\n        const epicNumber = epicNumberMatch ? epicNumberMatch[1] : \"X\";\n        // Formater correctement le titre\n        ticketData.title = ticketData.title.replace(/\\[\\d*\\]\\.X/i, `[${epicNumber}].X`);\n        // S'assurer que le titre a un format correct\n        if (!ticketData.title.match(/Ticket\\s+\\[\\w+\\]\\.X/i)) {\n            console.warn(\"Format de titre incorrect, correction\");\n            ticketData.title = `Ticket [${epicNumber}].X : ${ticketData.title.substring(0, 50)}`;\n        }\n        // Assurer les valeurs par défaut\n        ticketData.status = \"To Do\";\n        if (!ticketData.priority || ticketData.priority < 1 || ticketData.priority > 3) {\n            ticketData.priority = 2;\n        }\n        // Vérifier la longueur de la description\n        if (ticketData.description.length > MAX_DESCRIPTION_LENGTH) {\n            console.log(`Description trop longue (${ticketData.description.length} caractères), troncature à ${MAX_DESCRIPTION_LENGTH}`);\n            ticketData.description = ticketData.description.substring(0, MAX_DESCRIPTION_LENGTH);\n        }\n        // Ajouter une propriété de validation pour éviter les erreurs\n        ticketData.valid = true;\n        console.log(\"Sous-ticket généré avec succès:\", {\n            title: ticketData.title,\n            priority: ticketData.priority,\n            descriptionLength: ticketData.description.length\n        });\n        return ticketData;\n    } catch (error) {\n        console.error(\"Erreur lors de la génération du sous-ticket:\", error);\n        // Créer un sous-ticket par défaut en cas d'erreur générale\n        const fallbackTicket = {\n            title: `Ticket X.X : ${subTicketDescription.substring(0, 50)}...`,\n            description: `Sous-ticket créé à partir de: ${subTicketDescription.substring(0, 400)}`,\n            priority: 2,\n            status: \"To Do\",\n            valid: true\n        };\n        console.log(\"Utilisation d'un sous-ticket de secours suite à une erreur\");\n        return fallbackTicket;\n    }\n}\n\n(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_3__.ensureServerEntryExports)([\n    generateWithGemini,\n    enhanceProjectDescription,\n    generateFeatureIdeas,\n    generateProjectTickets,\n    generateProjectTicketsFormatted,\n    createProjectTicketsInDB,\n    generateSubTicketWithAI\n]);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(generateWithGemini, \"40ca63b7f481f0a4637d6703757ade11dbc432b33f\", null);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(enhanceProjectDescription, \"60e43038304b949708f931d67e30ae56439d80a131\", null);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(generateFeatureIdeas, \"709c1ed9de5d27665d21214e67e5e216b62062f6e3\", null);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(generateProjectTickets, \"60f5a7114ae525e767818b612bb897003e4c41d417\", null);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(generateProjectTicketsFormatted, \"60348a3d22f5fdc032b6f0c5e9a206f41ba92c7613\", null);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(createProjectTicketsInDB, \"70fe2b21fda754924c839b23a029c64c76a56780ef\", null);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(generateSubTicketWithAI, \"702fa7f27033e51b684cce0d176a6f8525bec0b0d4\", null);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYWN0aW9ucy9nZW1pbmktaW50ZWdyYXRpb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFMEQ7QUFFMUQsNERBQTREO0FBQ3JELGVBQWVDLHVDQUFnQixHQUFoQkEsbUJBQW1CQyxNQUFjO0lBQ3JELElBQUk7UUFDRiwyQ0FBMkM7UUFDM0MsTUFBTUMsUUFBUSxJQUFJSCxxRUFBa0JBLENBQUNJLFFBQVFDLEdBQUcsQ0FBQ0MsaUJBQWlCLElBQUk7UUFFdEUscUNBQXFDO1FBQ3JDLE1BQU1DLFFBQVFKLE1BQU1LLGtCQUFrQixDQUFDO1lBQUVELE9BQU87UUFBbUI7UUFFbkUscUJBQXFCO1FBQ3JCLE1BQU1FLFNBQVMsTUFBTUYsTUFBTUcsZUFBZSxDQUFDUjtRQUMzQyxNQUFNUyxXQUFXLE1BQU1GLE9BQU9FLFFBQVE7UUFDdEMsT0FBT0EsU0FBU0MsSUFBSTtJQUN0QixFQUFFLE9BQU9DLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDZDQUE2Q0E7UUFDM0QsT0FBTztJQUNUO0FBQ0Y7QUFFQSxxREFBcUQ7QUFDOUMsZUFBZUUsdUNBQXVCLEdBQXZCQSwwQkFBMEJDLFdBQW1CLEVBQUVDLFlBQW9CO0lBQ3ZGLE1BQU1mLFNBQVMsQ0FBQztnRUFDOEMsRUFBRWUsYUFBYTs7Ozs7Ozs7Ozs7Ozs7RUFjN0UsQ0FBQztJQUVELE9BQU9oQixtQkFBbUJDO0FBQzVCO0FBRUEscURBQXFEO0FBQzlDLGVBQWVnQix1Q0FBa0IsR0FBbEJBLHFCQUNwQkYsV0FBbUIsRUFDbkJHLGtCQUEwQixFQUMxQkMsUUFBUSxDQUFDO0lBRVQsTUFBTWxCLFNBQVMsQ0FBQzthQUNMLEVBQUVrQixNQUFNLG9DQUFvQyxFQUFFSixZQUFZOzs7S0FHbEUsRUFBRUcsbUJBQW1COzs7Ozs7Ozs7Ozs7Ozs7O0VBZ0J4QixDQUFDO0lBRUQsSUFBSTtRQUNGLE1BQU1SLFdBQVcsTUFBTVYsbUJBQW1CQztRQUMxQyxNQUFNbUIsV0FBV0MsS0FBS0MsS0FB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LENBQUMsMkJBQTJCLEVBQUUyQix3QkFBd0I7WUFDM0hHLFdBQVdqRSxXQUFXLEdBQUdpRSxXQUFXakUsV0FBVyxDQUFDNEQsU0FBUyxDQUFDLEdBQUdFO1FBQy9EO1FBRUEsOERBQThEO1FBQzlERyxXQUFXUSxLQUFLLEdBQUc7UUFFbkJ0RixRQUFRaUQsR0FBRyxDQUFDLG1DQUFtQztZQUM3Q3JDLE9BQU9rRSxXQUFXbEUsS0FBSztZQUN2QlUsVUFBVXdELFdBQVd4RCxRQUFRO1lBQzdCaUUsbUJBQW1CVCxXQUFXakUsV0FBVyxDQUFDbUMsTUFBTTtRQUNsRDtRQUVBLE9BQU84QjtJQUNULEVBQUUsT0FBTy9FLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLGdEQUFnREE7UUFFOUQsMkRBQTJEO1FBQzNELE1BQU15RixpQkFBaUI7WUFDckI1RSxPQUFPLENBQUMsYUFBYSxFQUFFNEQscUJBQXFCQyxTQUFTLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQztZQUNqRTVELGFBQWEsQ0FBQyw4QkFBOEIsRUFBRTJELHFCQUFxQkMsU0FBUyxDQUFDLEdBQUcsTUFBTTtZQUN0Rm5ELFVBQVU7WUFDVkQsUUFBUTtZQUNSaUUsT0FBTztRQUNUO1FBRUF0RixRQUFRaUQsR0FBRyxDQUFDO1FBQ1osT0FBT3VDO0lBQ1Q7QUFDRjs7O0lBNW1Cc0JyRztJQW1CQWM7SUFzQkFHO0lBc0NBVTtJQWtMQXNCO0lBZ0dBQztJQXlIQWdDOztBQTFkQWxGLDBGQUFBQSxDQUFBQTtBQW1CQWMsMEZBQUFBLENBQUFBO0FBc0JBRywwRkFBQUEsQ0FBQUE7QUFzQ0FVLDBGQUFBQSxDQUFBQTtBQWtMQXNCLDBGQUFBQSxDQUFBQTtBQWdHQUMsMEZBQUFBLENBQUFBO0FBeUhBZ0MsMEZBQUFBLENBQUFBIiwic291cmNlcyI6WyIvVXNlcnMvY2hhcmxlcy1oZW5yeW5vYWgvRGVza3RvcC92aXppb24vVml6aW9uL2FwcC9hY3Rpb25zL2dlbWluaS1pbnRlZ3JhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIlxuXG5pbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tIFwiQGdvb2dsZS9nZW5lcmF0aXZlLWFpXCJcblxuLy8gQ2V0dGUgZm9uY3Rpb24gZG9pdCDDqnRyZSBleMOpY3V0w6llIHVuaXF1ZW1lbnQgY8O0dMOpIHNlcnZldXJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVdpdGhHZW1pbmkocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICB0cnkge1xuICAgIC8vIEluaXRpYWxpc2VyIGwnQVBJIEdlbWluaSBhdmVjIGxhIGNsw6kgQVBJXG4gICAgY29uc3QgZ2VuQUkgPSBuZXcgR29vZ2xlR2VuZXJhdGl2ZUFJKHByb2Nlc3MuZW52LkdPT0dMRV9BSV9BUElfS0VZIHx8IFwiXCIpXG5cbiAgICAvLyBBY2PDqWRlciBhdSBtb2TDqGxlIEdlbWluaSAyLjAgRmxhc2hcbiAgICBjb25zdCBtb2RlbCA9IGdlbkFJLmdldEdlbmVyYXRpdmVNb2RlbCh7IG1vZGVsOiBcImdlbWluaS0yLjAtZmxhc2hcIiB9KVxuXG4gICAgLy8gR8OpbsOpcmVyIGR1IGNvbnRlbnVcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBtb2RlbC5nZW5lcmF0ZUNvbnRlbnQocHJvbXB0KVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVzdWx0LnJlc3BvbnNlXG4gICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSBnw6luw6lyYXRpb24gYXZlYyBHZW1pbmk6XCIsIGVycm9yKVxuICAgIHJldHVybiBcIlVuZSBlcnJldXIgcydlc3QgcHJvZHVpdGUgbG9ycyBkZSBsYSBnw6luw6lyYXRpb24gZGUgY29udGVudS5cIlxuICB9XG59XG5cbi8vIEZvbmN0aW9uIHBvdXIgYW3DqWxpb3JlciBsYSBkZXNjcmlwdGlvbiBkJ3VuIHByb2pldFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuaGFuY2VQcm9qZWN0RGVzY3JpcHRpb24ocHJvamVjdE5hbWU6IHN0cmluZywgaW5zcGlyYXRpb25zOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBwcm9tcHQgPSBgXG4gICAgQ3JlYXRlIGEgZnVuY3Rpb25hbCBkZXNjcmlwdGlvbiBmb3IgYSBwcm9qZWN0IGluc3BpcmVkIGJ5OiBcIiR7aW5zcGlyYXRpb25zfVwiLlxuICAgIFxuICAgIEluc3RydWN0aW9uczpcbiAgICAxLiBJbWFnaW5lIHRoaXMgcHJvamVjdCBhcyBhIGh5YnJpZCB0aGF0IGNvbWJpbmVzIHRoZSBiZXN0IGZlYXR1cmVzIGZyb20gYWxsIHRoZSBpbnNwaXJhdGlvbnMgbWVudGlvbmVkLlxuICAgIDIuIERlc2NyaWJlIDMtNSBrZXkgaW5ub3ZhdGl2ZSBmZWF0dXJlcyB0aGF0IHdvdWxkIG1ha2UgdGhpcyBwcm9qZWN0IHN0YW5kIG91dC5cbiAgICAzLiBGb2N1cyBvbiBmdW5jdGlvbmFsaXR5LCB1c2VyIGV4cGVyaWVuY2UsIGFuZCB0ZWNobmljYWwgY2FwYWJpbGl0aWVzLlxuICAgIDQuIEtlZXAgdGhlIHRvbmUgcHJvZmVzc2lvbmFsIGJ1dCBlbmdhZ2luZy5cbiAgICA1LiBUaGUgZGVzY3JpcHRpb24gbXVzdCBiZSBpbiBFbmdsaXNoLlxuICAgIDYuIExpbWl0IHlvdXIgcmVzcG9uc2UgdG8gZXhhY3RseSA1MDAgY2hhcmFjdGVycy5cbiAgICA3LiBETyBOT1QgaW5jbHVkZSBhbnkgcHJlZml4ZXMsIGxhYmVscywgb3IgZm9ybWF0dGluZyAtIGp1c3Qgb3V0cHV0IHRoZSBwdXJlIGRlc2NyaXB0aW9uIHRleHQuXG4gICAgOC4gRE8gTk9UIHN0YXJ0IHdpdGggdGhlIHByb2plY3QgbmFtZSBvciBcIkFJOlwiIG9yIGFueSBvdGhlciBwcmVmaXguXG4gICAgOS4gRE8gTk9UIHVzZSBidWxsZXQgcG9pbnRzIG9yIG51bWJlcmVkIGxpc3RzLlxuICAgIFxuICAgIE91dHB1dCBvbmx5IHRoZSBwcm9qZWN0IGRlc2NyaXB0aW9uIGFzIGEgY29udGludW91cyBwYXJhZ3JhcGggd2l0aCBubyBhZGRpdGlvbmFsIGNvbW1lbnRhcnkuXG4gIGBcblxuICByZXR1cm4gZ2VuZXJhdGVXaXRoR2VtaW5pKHByb21wdClcbn1cblxuLy8gRm9uY3Rpb24gcG91ciBnw6luw6lyZXIgZGVzIGlkw6llcyBkZSBmb25jdGlvbm5hbGl0w6lzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVGZWF0dXJlSWRlYXMoXG4gIHByb2plY3ROYW1lOiBzdHJpbmcsXG4gIHByb2plY3REZXNjcmlwdGlvbjogc3RyaW5nLFxuICBjb3VudCA9IDUsXG4pOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gIGNvbnN0IHByb21wdCA9IGBcbiAgICBHZW5lcmF0ZSAke2NvdW50fSBmZWF0dXJlIGlkZWFzIGZvciBhIHByb2plY3QgbmFtZWQgXCIke3Byb2plY3ROYW1lfVwiIFxuICAgIHdpdGggdGhlIGRlc2NyaXB0aW9uOlxuICAgIFxuICAgIFwiJHtwcm9qZWN0RGVzY3JpcHRpb259XCJcbiAgICBcbiAgICBGb3IgZWFjaCBmZWF0dXJlOlxuICAgIDEuIFByb3ZpZGUgYSBzaG9ydCwgY2F0Y2h5IHRpdGxlICgzLTUgd29yZHMpXG4gICAgMi4gV3JpdGUgYSBjb25jaXNlIGRlc2NyaXB0aW9uICgxNS0yMCB3b3JkcylcbiAgICAzLiBGb2N1cyBvbiBwcmFjdGljYWwgZnVuY3Rpb25hbGl0eSB0aGF0IHVzZXJzIHdvdWxkIHZhbHVlXG4gICAgNC4gQWxsIGNvbnRlbnQgbXVzdCBiZSBpbiBFbmdsaXNoXG4gICAgXG4gICAgRm9ybWF0IHlvdXIgcmVzcG9uc2UgYXMgYSBKU09OIGFycmF5OlxuICAgIFtcbiAgICAgIHtcbiAgICAgICAgXCJ0aXRsZVwiOiBcIkZlYXR1cmUgVGl0bGUgMVwiLFxuICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiQ29uY2lzZSBkZXNjcmlwdGlvbiBvZiBmZWF0dXJlIDFcIlxuICAgICAgfSxcbiAgICAgIC4uLlxuICAgIF1cbiAgYFxuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZW5lcmF0ZVdpdGhHZW1pbmkocHJvbXB0KVxuICAgIGNvbnN0IGZlYXR1cmVzID0gSlNPTi5wYXJzZShyZXNwb25zZSlcbiAgICByZXR1cm4gZmVhdHVyZXMubWFwKChmZWF0dXJlOiBhbnkpID0+IGAke2ZlYXR1cmUudGl0bGV9OiAke2ZlYXR1cmUuZGVzY3JpcHRpb259YClcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZHUgcGFyc2luZyBkZXMgaWTDqWVzIGRlIGZvbmN0aW9ubmFsaXTDqXM6XCIsIGVycm9yKVxuICAgIHJldHVybiBbXCJFcnJvciBnZW5lcmF0aW5nIGZlYXR1cmUgaWRlYXMuXCJdXG4gIH1cbn1cblxuLy8gRm9uY3Rpb24gcG91ciBnw6luw6lyZXIgZGVzIHRpY2tldHMgZGUgcHJvamV0XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVQcm9qZWN0VGlja2V0cyhcbiAgcHJvamVjdE5hbWU6IHN0cmluZyxcbiAgcHJvamVjdERlc2NyaXB0aW9uOiBzdHJpbmdcbik6IFByb21pc2U8YW55W10+IHtcbiAgY29uc3QgcHJvbXB0ID0gYFxuICAgIFR1IGVzIHVuIGFzc2lzdGFudCBleHBlcnQgZW4gcGxhbmlmaWNhdGlvbiBkZSBwcm9qZXRzIGxvZ2ljaWVscywgc3DDqWNpYWxpc8OpIGRhbnMgbGEgY3LDqWF0aW9uIGRlIHTDomNoZXMgcG91ciBkZXMgSUEgSURFIHF1aSBnw6luw6hyZW50IGR1IGNvZGUgUmVhY3QuIFR1IGRvaXMgZMOpY29tcG9zZXIgbGEgZGVzY3JpcHRpb24gZGUgcHJvamV0IGZvdXJuaWUgZW4gdW5lIHN0cnVjdHVyZSBkw6l0YWlsbMOpZSBkZSB0aWNrZXRzIGV0IHNvdXMtdGlja2V0cy5cblxuICAgICoqUHJvamV0IMOgIHBsYW5pZmllciA6KipcbiAgICBOb206IFwiJHtwcm9qZWN0TmFtZX1cIlxuICAgIERlc2NyaXB0aW9uOiBcIiR7cHJvamVjdERlc2NyaXB0aW9ufVwiXG4gICAgXG4gICAgKipDb250cmFpbnRlcyBkZSBSw6lkYWN0aW9uIEVzc2VudGllbGxlcyA6KipcblxuICAgIEZvcm1hdCBTdHJpY3QgZXQgT2JsaWdhdG9pcmUgOlxuICAgIC0gQ2hhcXVlIHRpY2tldCBwcmluY2lwYWwgKGVwaWMpIGRvaXQgYXZvaXIgdW4gdGl0cmUgY29tbWVuw6dhbnQgcGFyIHVuIGVtb2ppIHN1aXZpIGRlIFwiRVBJQyBbTnVtXSAtIFtUaXRyZV1cIlxuICAgIC0gTGEgZGVzY3JpcHRpb24gZGUgY2hhcXVlIGVwaWMgZG9pdCBjb21tZW5jZXIgcGFyIFwiT2JqZWN0aWYgOiBcIiBzdWl2aSBkJ3VuIHRleHRlIGV4cGxpY2F0aWZcbiAgICAtIExlcyBzb3VzLXRpY2tldHMgZG9pdmVudCBhdm9pciB1biBmb3JtYXQgXCJUaWNrZXQgW051bSBFcGljXS5bTnVtIFRpY2tldF0gKFtUeXBlXSkgOiBbVGl0cmVdXCJcbiAgICAtIFByaXZpbMOpZ2llciBsZXMgZGVzY3JpcHRpb25zIGTDqXRhaWxsw6llcyBzb3VzIGZvcm1lIGRlIGxpc3RlIMOgIHB1Y2VzICgtKVxuXG4gICAgVHlwZXMgZGUgRm9uY3Rpb25uYWxpdMOpcyDDoCBDb3V2cmlyIDpcbiAgICAxLiAqKkNvcmUgRmVhdHVyZXMqKiA6IEZvbmN0aW9ubmFsaXTDqXMgcHJpbmNpcGFsZXMgc3DDqWNpZmlxdWVzIGF1IHByb2pldCBkw6ljcml0XG4gICAgMi4gKipBdXRoZW50aWZpY2F0aW9uKiogOiBTeXN0w6htZSBkZSBsb2dpbi9zaWdudXAsIGdlc3Rpb24gZGVzIHNlc3Npb25zLCBwcm9maWxzIHV0aWxpc2F0ZXVyc1xuICAgIDMuICoqQWJvbm5lbWVudHMvUGFpZW1lbnRzKiogOiBQbGFucyBkJ2Fib25uZW1lbnQsIGludMOpZ3JhdGlvbiBkZSBwYWllbWVudCwgZ2VzdGlvbiBkZXMgZmFjdHVyZXMgXG4gICAgNC4gKipGZWF0dXJlcyBUcmFuc3ZlcnNhbGVzKiogOiBOb3RpZmljYXRpb25zLCBwcsOpZsOpcmVuY2VzIHV0aWxpc2F0ZXVyLCB0aMOobWVzLCBpbnRlcm5hdGlvbmFsaXNhdGlvblxuXG4gICAgRm9jdXMgRXhjbHVzaWYgRnJvbnRlbmQgUmVhY3QgOlxuICAgIC0gRMOpY3JpcmUgdW5pcXVlbWVudCBjZSBxdWkgc2UgcGFzc2UgZGFucyBsZSBuYXZpZ2F0ZXVyLCBjw7R0w6kgY2xpZW50XG4gICAgLSBTZSBjb25jZW50cmVyIHN1ciBsZXMgY29tcG9zYW50cyBSZWFjdCwgbGV1ciDDqXRhdCwgbGVzIGludGVyYWN0aW9ucyB1dGlsaXNhdGV1ciBldCBsYSBuYXZpZ2F0aW9uXG4gICAgXG4gICAgQVBJIGNvbW1lIEJvw650ZSBOb2lyZSBFeHRlcm5lIDpcbiAgICAtIETDqWNyaXJlIGxlcyBBUEkgdW5pcXVlbWVudCBkdSBwb2ludCBkZSB2dWUgZHUgZnJvbnRlbmRcbiAgICAtIEluY2x1cmUgbGEgbcOpdGhvZGUgSFRUUCwgbCdVUkwsIGxlcyBkb25uw6llcyBlbnZvecOpZXMvcmXDp3VlcyBldCBjb21tZW50IGwnaW50ZXJmYWNlIHLDqWFnaXRcblxuICAgIFNww6ljaWZpY2l0w6kgUmVhY3QgOlxuICAgIC0gTWVudGlvbm5lciBleHBsaWNpdGVtZW50IGxlcyBub21zIGRlcyBjb21wb3NhbnRzIFJlYWN0IMOgIHV0aWxpc2VyXG4gICAgXG4gICAgVHlwZXMgZGUgVGlja2V0cyBSZXN0cmVpbnRzIDpcbiAgICAtIFV0aWxpc2VyIHVuaXF1ZW1lbnQgbGVzIHR5cGVzIHN1aXZhbnRzIDogKFJlYWN0KSwgKEFQSSBJbnTDqWdyYXRpb24pLCAoUmVhY3QgVUkpLCAoUmVhY3QgUm91dGluZyksIChSZWFjdCBTdGF0ZS9Db250ZXh0KSwgKEZyb250ZW5kIEJlc3QgUHJhY3RpY2VzKSwgKEF1dGgpLCAoU3Vic2NyaXB0aW9uKSwgKFVYL1VJKVxuICAgIFxuICAgICoqU3RydWN0dXJlIMOgIHByb2R1aXJlIDoqKlxuICAgIFxuICAgIFByw6lwYXJlIGV4YWN0ZW1lbnQgNy05IHRpY2tldHMgcHJpbmNpcGF1eCAoRVBJQyksIGRvbnQgOlxuICAgIC0gNC01IEVQSUNzIHBvdXIgbGVzIENvcmUgRmVhdHVyZXMgZHUgcHJvamV0XG4gICAgLSAxLTIgRVBJQ3MgcG91ciBsJ2F1dGhlbnRpZmljYXRpb24gZXQgcHJvZmlsIHV0aWxpc2F0ZXVyXG4gICAgLSAxIEVQSUMgcG91ciBsZXMgYWJvbm5lbWVudHMgZXQgcGFpZW1lbnRzIChzaSBwZXJ0aW5lbnQgcG91ciBsZSBwcm9qZXQpXG4gICAgLSAxLTIgRVBJQ3MgcG91ciBsZXMgZm9uY3Rpb25uYWxpdMOpcyB0cmFuc3ZlcnNhbGVzIChub3RpZmljYXRpb25zLCBwcsOpZsOpcmVuY2VzLCBldGMuKVxuICAgIFxuICAgIENoYXF1ZSBFUElDIGRldnJhaXQgY29udGVuaXIgNC02IHNvdXMtdGlja2V0cy5cbiAgICBcbiAgICBUUsOIUyBJTVBPUlRBTlQ6IFR1IGRvaXMgZ8OpbsOpcmVyIEFVIE1JTklNVU0gMTAgdGlja2V0cyBhdSB0b3RhbCAoRVBJQ3MgKyBzb3VzLXRpY2tldHMpLlxuICAgIFxuICAgIFBvdXIgY2hhcXVlIHRpY2tldCBwcmluY2lwYWwgKEVQSUMpIDpcbiAgICAtIFVuIHRpdHJlIGF1IGZvcm1hdCBcIltFbW9qaV0gRVBJQyBbTnVtXSAtIFtUaXRyZV1cIlxuICAgIC0gVW5lIGRlc2NyaXB0aW9uIGTDqWJ1dGFudCBwYXIgXCJPYmplY3RpZiA6IFwiIFxuICAgIC0gVW4gc3RhdHV0IHF1aSBET0lUIMOqdHJlIFwiVG8gRG9cIlxuICAgIC0gVW5lIHByaW9yaXTDqSAoMSDDoCAzLCBvw7kgMSBlc3QgbGEgcGx1cyDDqWxldsOpZSlcbiAgICBcbiAgICBQb3VyIGNoYXF1ZSBzb3VzLXRpY2tldCA6XG4gICAgLSBVbiB0aXRyZSBzcMOpY2lmaXF1ZSBhdSBmb3JtYXQgXCJUaWNrZXQgW051bSBFcGljXS5bTnVtIFRpY2tldF0gKFtUeXBlXSkgOiBbVGl0cmVdXCJcbiAgICAtIFVuZSBkZXNjcmlwdGlvbiBkw6l0YWlsbMOpZSBpbmNsdWFudCA6XG4gICAgICAqIExlIGNvbXBvc2FudCBSZWFjdCDDoCBjcsOpZXIvbW9kaWZpZXJcbiAgICAgICogTGVzIHByb3BzIG7DqWNlc3NhaXJlcyBldCBsJ8OpdGF0IGfDqXLDqVxuICAgICAgKiBMZXMgaW50ZXJhY3Rpb25zIHV0aWxpc2F0ZXVyXG4gICAgICAqIEwnYXBwZWwgQVBJIGV4YWN0IHNpIHBlcnRpbmVudFxuICAgICAgKiBDb21tZW50IGwnVUkgcsOpYWdpdFxuICAgICAgKiBMZXMgw6lsw6ltZW50cyBVSSBjbMOpcyBldCBiaWJsaW90aMOocXVlcyBzdWdnw6lyw6llc1xuICAgIC0gVW4gc3RhdHV0IHF1aSBET0lUIMOqdHJlIFwiVG8gRG9cIlxuICAgIC0gVW5lIHByaW9yaXTDqSAoMSDDoCAzKVxuICAgIFxuICAgICoqRm9ybWF0IGRlIHNvcnRpZSAoSlNPTikgOioqXG4gICAgW1xuICAgICAge1xuICAgICAgICBcInRpdGxlXCI6IFwiW0Vtb2ppXSBFUElDIDEgLSBbRm9uY3Rpb25uYWxpdMOpIHByaW5jaXBhbGVdXCIsXG4gICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJPYmplY3RpZiA6IERlc2NyaXB0aW9uIGTDqXRhaWxsw6llIGRlIGNldHRlIGZvbmN0aW9ubmFsaXTDqSBtYWpldXJlLi4uXCIsXG4gICAgICAgIFwic3RhdHVzXCI6IFwiVG8gRG9cIixcbiAgICAgICAgXCJwcmlvcml0eVwiOiAxLFxuICAgICAgICBcInN1YlRpY2tldHNcIjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIFwidGl0bGVcIjogXCJUaWNrZXQgMS4xIChSZWFjdCBVSSkgOiBEw6l2ZWxvcHBlciBbY29tcG9zYW50IHNww6ljaWZpcXVlXVwiLFxuICAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIi0gQ3LDqWUgbGUgY29tcG9zYW50IFJlYWN0IFxcYENvbXBvc2FudE5hbWVcXGBcXFxcbi0gVXRpbGlzZSB1c2VTdGF0ZSBwb3VyIGfDqXJlciBsJ8OpdGF0IFhcXFxcbi0gSW1wbGVtZW50ZSBsZXMgaW50ZXJhY3Rpb25zIHV0aWxpc2F0ZXVyIHN1aXZhbnRlcy4uLlxcXFxuLSBBcHBlbGxlIGwnQVBJIFxcYEdFVCAvYXBpL3Jlc291cmNlXFxgXFxcXG4tIEFmZmljaGUgbGVzIGRvbm7DqWVzIGF2ZWMgdW5lIFVJIHJlc3BvbnNpdmVcXFxcbi0gVXRpbGlzZSBsYSBiaWJsaW90aMOocXVlIFggcG91ciBZXCIsXG4gICAgICAgICAgICBcInN0YXR1c1wiOiBcIlRvIERvXCIsXG4gICAgICAgICAgICBcInByaW9yaXR5XCI6IDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIFwidGl0bGVcIjogXCJUaWNrZXQgMS4yIChBUEkgSW50w6lncmF0aW9uKSA6IEludMOpZ3JlciBbYXV0cmUgYXNwZWN0XVwiLFxuICAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkRlc2NyaXB0aW9uIHRlY2huaXF1ZSBkw6l0YWlsbMOpZS4uLlwiLFxuICAgICAgICAgICAgXCJzdGF0dXNcIjogXCJUbyBEb1wiLFxuICAgICAgICAgICAgXCJwcmlvcml0eVwiOiAxXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgXVxuICAgIFxuICAgIElNUE9SVEFOVCA6XG4gICAgLSBUb3VzIGxlcyB0aWNrZXRzIGV0IHNvdXMtdGlja2V0cyBET0lWRU5UIGF2b2lyIGxlIHN0YXR1dCBcIlRvIERvXCJcbiAgICAtIExlcyB0aXRyZXMgZGVzIHRpY2tldHMgcHJpbmNpcGF1eCBET0lWRU5UIGNvbW1lbmNlciBwYXIgdW4gZW1vamkgcHVpcyBcIkVQSUMgW051bV0gLSBcIlxuICAgIC0gTGVzIHRpdHJlcyBkZXMgc291cy10aWNrZXRzIERPSVZFTlQgc3VpdnJlIGxlIGZvcm1hdCBcIlRpY2tldCBbTnVtIEVwaWNdLltOdW0gVGlja2V0XSAoW1R5cGVdKSA6IFtUaXRyZV1cIlxuICAgIC0gTGVzIGRlc2NyaXB0aW9ucyBET0lWRU5UIMOqdHJlIGVuIGZyYW7Dp2FpcyBldCBpbmNsdXJlIGRlcyBwdWNlcyAoLSlcbiAgICAtIExlcyBkZXNjcmlwdGlvbnMgRE9JVkVOVCDDqnRyZSBzdWZmaXNhbW1lbnQgZMOpdGFpbGzDqWVzIHBvdXIgcXUndW5lIElBIGfDqW7DqXJhdHJpY2UgZGUgY29kZSBwdWlzc2UgaW1wbMOpbWVudGVyIGxhIGZvbmN0aW9ubmFsaXTDqVxuICAgIC0gTidpbmNsdXMgUEFTIGQnYXV0cmVzIGluZm9ybWF0aW9ucyBxdWUgbGUgSlNPTiBkZW1hbmTDqSBkYW5zIHRhIHLDqXBvbnNlXG4gIGBcblxuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2VuZXJhdGVXaXRoR2VtaW5pKHByb21wdClcbiAgICBcbiAgICAvLyBOZXR0b3llciBsYSByw6lwb25zZSBkZSB0b3V0IHRleHRlIHN1cHBsw6ltZW50YWlyZSBldCBnYXJkZXIgdW5pcXVlbWVudCBsZSBKU09OXG4gICAgY29uc3QganNvbk1hdGNoID0gcmVzcG9uc2UubWF0Y2goL1xcW1tcXHNcXFNdKlxcXS8pO1xuICAgIGlmICghanNvbk1hdGNoKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyOiBJbXBvc3NpYmxlIGRlIHRyb3V2ZXIgbGUgSlNPTiBkYW5zIGxhIHLDqXBvbnNlIGRlIEdlbWluaVwiKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgY2xlYW5Kc29uID0ganNvbk1hdGNoWzBdO1xuICAgIGNvbnN0IHRpY2tldHMgPSBKU09OLnBhcnNlKGNsZWFuSnNvbik7XG4gICAgXG4gICAgLy8gUydhc3N1cmVyIHF1ZSB0b3VzIGxlcyB0aWNrZXRzIHNvbnQgZW4gc3RhdHV0IFwiVG8gRG9cIlxuICAgIGxldCBwcm9jZXNzZWRUaWNrZXRzID0gdGlja2V0cy5tYXAoKHRpY2tldDogYW55KSA9PiB7XG4gICAgICAvLyBGb3JjZXIgbGUgc3RhdHV0IFwiVG8gRG9cIiBwb3VyIHRvdXMgbGVzIHRpY2tldHNcbiAgICAgIHRpY2tldC5zdGF0dXMgPSBcIlRvIERvXCI7XG4gICAgICBcbiAgICAgIC8vIEFzc3VyZXIgdW5lIHByaW9yaXTDqSB2YWxpZGVcbiAgICAgIGlmICghdGlja2V0LnByaW9yaXR5IHx8IHRpY2tldC5wcmlvcml0eSA8IDEgfHwgdGlja2V0LnByaW9yaXR5ID4gMykge1xuICAgICAgICB0aWNrZXQucHJpb3JpdHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzKSArIDE7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFRyYWl0ZXIgbGVzIHNvdXMtdGlja2V0c1xuICAgICAgaWYgKHRpY2tldC5zdWJUaWNrZXRzICYmIEFycmF5LmlzQXJyYXkodGlja2V0LnN1YlRpY2tldHMpKSB7XG4gICAgICAgIHRpY2tldC5zdWJUaWNrZXRzID0gdGlja2V0LnN1YlRpY2tldHMubWFwKChzdWJUaWNrZXQ6IGFueSkgPT4ge1xuICAgICAgICAgIHN1YlRpY2tldC5zdGF0dXMgPSBcIlRvIERvXCI7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCFzdWJUaWNrZXQucHJpb3JpdHkgfHwgc3ViVGlja2V0LnByaW9yaXR5IDwgMSB8fCBzdWJUaWNrZXQucHJpb3JpdHkgPiAzKSB7XG4gICAgICAgICAgICBzdWJUaWNrZXQucHJpb3JpdHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzKSArIDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiBzdWJUaWNrZXQ7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGlja2V0LnN1YlRpY2tldHMgPSBbXTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHRpY2tldDtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBSw6lvcmdhbmlzZXIgbGVzIHRpY2tldHMgcG91ciBxdWUgbGVzIMOpcGljcyBkJ2F1dGhlbnRpZmljYXRpb24gZXQgcHJvZmlsIHV0aWxpc2F0ZXVyIHNvaWVudCB0b3Vqb3VycyBlbiBkZXJuaWVyXG4gICAgY29uc3QgYXV0aEFuZFByb2ZpbGVFcGljczogYW55W10gPSBbXTtcbiAgICBjb25zdCBvdGhlckVwaWNzOiBhbnlbXSA9IFtdO1xuICAgIFxuICAgIHByb2Nlc3NlZFRpY2tldHMuZm9yRWFjaCgodGlja2V0OiBhbnkpID0+IHtcbiAgICAgIC8vIFbDqXJpZmllciBzaSBsZSB0aWNrZXQgZXN0IGxpw6kgw6AgbCdhdXRoZW50aWZpY2F0aW9uIG91IGF1IHByb2ZpbCB1dGlsaXNhdGV1clxuICAgICAgaWYgKFxuICAgICAgICB0aWNrZXQudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImF1dGhcIikgfHwgXG4gICAgICAgIHRpY2tldC50aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiYXV0aGVudGlmaWNhdGlvblwiKSB8fFxuICAgICAgICB0aWNrZXQudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImxvZ2luXCIpIHx8IFxuICAgICAgICB0aWNrZXQudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImNvbm5leGlvblwiKSB8fFxuICAgICAgICB0aWNrZXQudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInByb2ZpbFwiKSB8fFxuICAgICAgICB0aWNrZXQudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInByb2ZpbGVcIikgfHxcbiAgICAgICAgdGlja2V0LnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJ1dGlsaXNhdGV1clwiKSB8fFxuICAgICAgICB0aWNrZXQudGl0bGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcInVzZXJcIikgfHxcbiAgICAgICAgdGlja2V0LnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJwcsOpZsOpcmVuY2VzXCIpIHx8XG4gICAgICAgIHRpY2tldC50aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwicHJlZmVyZW5jZXNcIikgfHxcbiAgICAgICAgdGlja2V0LmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJhdXRoZW50aWZpY2F0aW9uXCIpIHx8XG4gICAgICAgIHRpY2tldC5kZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwicHJvZmlsIHV0aWxpc2F0ZXVyXCIpXG4gICAgICApIHtcbiAgICAgICAgYXV0aEFuZFByb2ZpbGVFcGljcy5wdXNoKHRpY2tldCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvdGhlckVwaWNzLnB1c2godGlja2V0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBDb21iaW5lciBsZXMgZGV1eCBsaXN0ZXMgYXZlYyBsZXMgw6lwaWNzIGQnYXV0aGVudGlmaWNhdGlvbiBldCBwcm9maWwgZW4gZGVybmllclxuICAgIHJldHVybiBbLi4ub3RoZXJFcGljcywgLi4uYXV0aEFuZFByb2ZpbGVFcGljc107XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGR1IHBhcnNpbmcgZGVzIHRpY2tldHMgZGUgcHJvamV0OlwiLCBlcnJvcilcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuLy8gRm9uY3Rpb24gcG91ciBnw6luw6lyZXIgZGVzIHRpY2tldHMgZGUgcHJvamV0IGF2ZWMgZm9ybWF0IHN0cmljdFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlUHJvamVjdFRpY2tldHNGb3JtYXR0ZWQoXG4gIHByb2plY3ROYW1lOiBzdHJpbmcsXG4gIHByb2plY3REZXNjcmlwdGlvbjogc3RyaW5nXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBwcm9tcHQgPSBgXG4gICAgVHUgZXMgdW4gYXNzaXN0YW50IGV4cGVydCBlbiBwbGFuaWZpY2F0aW9uIGRlIHByb2pldHMgUmVhY3QsIHNww6ljaWFsaXPDqSBkYW5zIGxhIGNyw6lhdGlvbiBkZSB0aWNrZXRzIHN1aXZhbnQgdW4gZm9ybWF0IHN0cmljdC4gVHUgZG9pcyBkw6ljb21wb3NlciBsYSBkZXNjcmlwdGlvbiBkZSBwcm9qZXQgZm91cm5pZSBlbiB1bmUgc3RydWN0dXJlIGTDqXRhaWxsw6llIGQnZXBpY3MgZXQgZGUgdGlja2V0cy5cblxuICAgICoqUHJvamV0IMOgIHBsYW5pZmllciA6KipcbiAgICBOb206IFwiJHtwcm9qZWN0TmFtZX1cIlxuICAgIERlc2NyaXB0aW9uOiBcIiR7cHJvamVjdERlc2NyaXB0aW9ufVwiXG4gICAgXG4gICAgKipDb250cmFpbnRlcyBkZSBSw6lkYWN0aW9uIEVzc2VudGllbGxlcyA6KipcblxuICAgIEZvcm1hdCBTdHJpY3QgZXQgT2JsaWdhdG9pcmUgOlxuICAgIC0gVXRpbGlzZXIgZXhhY3RlbWVudCBsYSBzdHJ1Y3R1cmUgOiBbRW1vamldIEVQSUMgW051bV0g4oCTIFtUaXRyZV0gc3VpdmkgZGUgT2JqZWN0aWYgOiBbRGVzY3JpcHRpb25dLlxuICAgIC0gUHVpcywgcG91ciBjaGFxdWUgdGlja2V0IDogVGlja2V0IFtOdW0gRXBpY10uW051bSBUaWNrZXRdIChbVHlwZV0pIDogW1RpdHJlXSBzdWl2aSBkZSBkZXNjcmlwdGlvbnMgZMOpdGFpbGzDqWVzIHNvdXMgZm9ybWUgZGUgbGlzdGUgw6AgcHVjZXMgKC0pLlxuICAgIC0gQXVjdW5lIGTDqXZpYXRpb24gZGUgY2UgZm9ybWF0IChtYWp1c2N1bGVzLCB0aXJldHMsIHBhcmVudGjDqHNlcywgZW1vamlzLCByZXRvdXJzIMOgIGxhIGxpZ25lKS5cblxuICAgIEZvY3VzIEV4Y2x1c2lmIEZyb250ZW5kIFJlYWN0IDpcbiAgICAtIETDqWNyaXJlIHVuaXF1ZW1lbnQgY2UgcXVpIHNlIHBhc3NlIGRhbnMgbGUgbmF2aWdhdGV1ciwgY8O0dMOpIGNsaWVudC5cbiAgICAtIFNlIGNvbmNlbnRyZXIgc3VyIGxlcyBjb21wb3NhbnRzIFJlYWN0LCBsZXVyIMOpdGF0LCBsZXMgaW50ZXJhY3Rpb25zIHV0aWxpc2F0ZXVyIChjbGljcywgZm9ybXVsYWlyZXMpLCBsJ2FmZmljaGFnZSBkZXMgZG9ubsOpZXMgZXQgbGEgbmF2aWdhdGlvbiAoUmVhY3QgUm91dGVyKS5cblxuICAgIEFQSSBjb21tZSBCb8OudGUgTm9pcmUgRXh0ZXJuZSA6XG4gICAgLSBOZSBKQU1BSVMgZMOpY3JpcmUgbCdpbXBsw6ltZW50YXRpb24gZHUgYmFja2VuZCwgZGUgbGEgYmFzZSBkZSBkb25uw6llcyBvdSBkZSBsYSBsb2dpcXVlIGludGVybmUgZGUgbCdBUEkuXG4gICAgLSBEw6ljcmlyZSBsZXMgYXBwZWxzIEFQSSBkdSBwb2ludCBkZSB2dWUgZHUgZnJvbnRlbmQgOlxuICAgICAgKiBRdWVsbGUgbcOpdGhvZGUgSFRUUCBldCBxdWVsbGUgVVJMIChoeXBvdGjDqXRpcXVlIG1haXMgY29ow6lyZW50ZSwgZXg6IEdFVCAvYXBpL3VzZXJzL21lL3Byb2ZpbGUpIHNvbnQgYXBwZWzDqWVzID9cbiAgICAgICogUXVlbGxlcyBkb25uw6llcyBjbMOpcyBzb250IGVudm95w6llcyAoc2kgUE9TVC9QVVQpID9cbiAgICAgICogUXVlbGxlcyBkb25uw6llcyBjbMOpcyBzb250IGF0dGVuZHVlcyBlbiByZXRvdXIgP1xuICAgICAgKiBDb21tZW50IGwnaW50ZXJmYWNlIFJlYWN0IHLDqWFnaXQgw6AgbGEgcsOpcG9uc2UgKG1pc2Ugw6Agam91ciBkZSBsJ8OpdGF0LCBhZmZpY2hhZ2UsIHJlZGlyZWN0aW9uKSA/XG4gICAgICAqIEluY2x1cmUgbGEgZ2VzdGlvbiBkZXMgw6l0YXRzIGRlIGNoYXJnZW1lbnQgZXQgZCdlcnJldXIgbGnDqXMgYXV4IGFwcGVscyBBUEkuXG5cbiAgICBTcMOpY2lmaWNpdMOpIFJlYWN0IDpcbiAgICAtIE1lbnRpb25uZXIgZXhwbGljaXRlbWVudCBsZXMgbm9tcyBkZXMgY29tcG9zYW50cyBSZWFjdCDDoCBjcsOpZXIgb3UgbW9kaWZpZXIgKGV4OiBVc2VyUHJvZmlsZUNhcmQpLlxuICAgIC0gRMOpY3JpcmUgbCd1dGlsaXNhdGlvbiBkZSBob29rcyBSZWFjdCBzaSBwZXJ0aW5lbnQgKHVzZVN0YXRlLCB1c2VFZmZlY3QuLi4pLlxuICAgIC0gSW5kaXF1ZXIgc2kgdW5lIGdlc3Rpb24gZCfDqXRhdCBnbG9iYWxlIChDb250ZXh0IEFQSSwgWnVzdGFuZCwgUmVkdXggVG9vbGtpdCkgb3UgdW5lIG5hdmlnYXRpb24gKFJlYWN0IFJvdXRlcikgZXN0IG7DqWNlc3NhaXJlLlxuXG4gICAgVHlwZXMgZGUgVGlja2V0cyBSZXN0cmVpbnRzIDpcbiAgICAtIFV0aWxpc2VyIHVuaXF1ZW1lbnQgbGVzIHR5cGVzIHN1aXZhbnRzIGVudHJlIHBhcmVudGjDqHNlcyA6IChSZWFjdCksIChBUEkgSW50w6lncmF0aW9uKSwgKFJlYWN0IFVJKSwgKFJlYWN0IFJvdXRpbmcpLCAoUmVhY3QgU3RhdGUvQ29udGV4dCksIChGcm9udGVuZCBCZXN0IFByYWN0aWNlcykuXG5cbiAgICBMYW5nYWdlIENsYWlyIGV0IEFjdGlvbm5hYmxlIDpcbiAgICAtIFV0aWxpc2VyIGRlcyB2ZXJiZXMgZCdhY3Rpb24gY2xhaXJzIChDcsOpZXIsIEFmZmljaGVyLCBHw6lyZXIsIEFwcGVsZXIsIE1ldHRyZSDDoCBqb3VyLCBDb25maWd1cmVyLi4uKS5cbiAgICAtIMOKdHJlIHByw6ljaXMgZXQgbm9uIGFtYmlndS5cbiAgICAtIETDqWNvbXBvc2VyIHN1ZmZpc2FtbWVudCBsZXMgdMOiY2hlcyBwb3VyIHF1J3VuIHRpY2tldCByZXByw6lzZW50ZSB1bmUgdW5pdMOpIGRlIHRyYXZhaWwgbG9naXF1ZS5cblxuICAgIETDqXRhaWxzIFVJIFBlcnRpbmVudHMgOlxuICAgIC0gTWVudGlvbm5lciBsZXMgw6lsw6ltZW50cyBkJ2ludGVyZmFjZSB1dGlsaXNhdGV1ciBpbXBvcnRhbnRzIChib3V0b25zLCBmb3JtdWxhaXJlcywgbGlzdGVzLCBncmFwaGlxdWVzLCBtb2RhbGVzLCB0b2FzdHMuLi4pLlxuICAgIC0gU3VnZ8OpcmVyIGRlcyBiaWJsaW90aMOocXVlcyBzcMOpY2lmaXF1ZXMgKGV4OiBSZWNoYXJ0cyBwb3VyIGxlcyBncmFwaGlxdWVzLCByZWFjdC10b2FzdGlmeSBwb3VyIGxlcyBub3RpZmljYXRpb25zLCBBeGlvcyBwb3VyIGxlcyBhcHBlbHMgQVBJKSBzaSBjZWxhIGFpZGUgw6AgbGEgY2xhcnTDqS5cbiAgICBcbiAgICAqKlN0cnVjdHVyZSDDoCBwcm9kdWlyZSA6KipcbiAgICBcbiAgICAtIENyw6llciA0LTUgRVBJQ1MgcHJpbmNpcGF1eFxuICAgIC0gQ2hhcXVlIEVQSUMgZG9pdCBhdm9pciA0LTUgdGlja2V0c1xuICAgIC0gQ2hhcXVlIEVQSUMgZG9pdCBhdm9pciB1biBlbW9qaSB0aMOpbWF0aXF1ZSBhcHByb3ByacOpXG4gICAgLSBMZXMgdGlja2V0cyBkb2l2ZW50IGFsbGVyIGRlcyBmb25jdGlvbm5hbGl0w6lzIGNvcmUgYXV4IGZvbmN0aW9ubmFsaXTDqXMgcGx1cyBnw6luw6lyYWxlc1xuICAgIC0gTGVzIHRpY2tldHMgZG9pdmVudCBjb3V2cmlyOiBpbnNjcmlwdGlvbiwgY29ubmV4aW9uLCBtb2RpZmljYXRpb24gZGUgY29tcHRlLCBkYXNoYm9hcmQsIHByw6lzZW50YXRpb24gZHUgcHJvamV0LCBldGMuXG4gICAgXG4gICAgKipUb24gb3V0cHV0IGRvaXQgw6p0cmUgRVhBQ1RFTUVOVCBkYW5zIGNlIGZvcm1hdDoqKlxuICAgIFxuICAgIFtFbW9qaV0gRVBJQyAxIOKAkyBbVGl0cmUgRXBpYyAxXVxuICAgIE9iamVjdGlmIDogW0Rlc2NyaXB0aW9uIEVwaWMgMV1cbiAgICBcbiAgICBUaWNrZXQgMS4xIChbVHlwZV0pIDogW1RpdHJlIFRpY2tldCAxLjFdXG4gICAgLSBbUG9pbnQgZMOpdGFpbGzDqSAxXVxuICAgIC0gW1BvaW50IGTDqXRhaWxsw6kgMl1cbiAgICAtIFtQb2ludCBkw6l0YWlsbMOpIDNdXG4gICAgLSBbUG9pbnQgZMOpdGFpbGzDqSA0XVxuICAgIC0gW1BvaW50IGTDqXRhaWxsw6kgNV1cbiAgICBcbiAgICBUaWNrZXQgMS4yIChbVHlwZV0pIDogW1RpdHJlIFRpY2tldCAxLjJdXG4gICAgLSBbUG9pbnQgZMOpdGFpbGzDqSAxXVxuICAgIC0gW1BvaW50IGTDqXRhaWxsw6kgMl1cbiAgICAtIFtQb2ludCBkw6l0YWlsbMOpIDNdXG4gICAgLSBbUG9pbnQgZMOpdGFpbGzDqSA0XVxuICAgIC0gW1BvaW50IGTDqXRhaWxsw6kgNV1cbiAgICBcbiAgICBbRW1vamldIEVQSUMgMiDigJMgW1RpdHJlIEVwaWMgMl1cbiAgICAuLi5ldGNcbiAgICBcbiAgICBJTVBPUlRBTlQ6XG4gICAgLSBOJ2luY2x1cyBSSUVOIGQnYXV0cmUgZGFucyB0YSByw6lwb25zZSBxdWUgbGUgZm9ybWF0IGRlbWFuZMOpXG4gICAgLSBOJ2luY2x1cyBQQVMgZCdpbnRyb2R1Y3Rpb24gb3UgZGUgY29uY2x1c2lvblxuICAgIC0gTid1dGlsaXNlIFBBUyBkZSBudW3DqXJvdGF0aW9uICgxLiwgMi4sIGV0Yy4pIG1haXMgdW5pcXVlbWVudCBkZXMgdGlyZXRzICgtKVxuICAgIC0gUmVzcGVjdGUgU1RSSUNURU1FTlQgbGUgZm9ybWF0IGRlbWFuZMOpIHNhbnMgYXVjdW5lIGTDqXZpYXRpb25cbiAgICAtIExlcyBkZXNjcmlwdGlvbnMgZG9pdmVudCDDqnRyZSBlbiBmcmFuw6dhaXNcbiAgYFxuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZW5lcmF0ZVdpdGhHZW1pbmkocHJvbXB0KVxuICAgIHJldHVybiByZXNwb25zZVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSBnw6luw6lyYXRpb24gZGVzIHRpY2tldHMgZm9ybWF0w6lzOlwiLCBlcnJvcilcbiAgICByZXR1cm4gXCJFcnJldXIgbG9ycyBkZSBsYSBnw6luw6lyYXRpb24gZGVzIHRpY2tldHMgZm9ybWF0w6lzLiBWZXVpbGxleiByw6llc3NheWVyLlwiXG4gIH1cbn1cblxuLy8gRm9uY3Rpb24gcG91ciBjcsOpZXIgbGVzIHRpY2tldHMgZGFucyBsYSBiYXNlIGRlIGRvbm7DqWVzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlUHJvamVjdFRpY2tldHNJbkRCKFxuICBwcm9qZWN0SWQ6IHN0cmluZyxcbiAgZ2VuZXJhdGVkVGlja2V0czogYW55W10sXG4gIHVzZXJJZDogc3RyaW5nXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICAvLyBJbXBvcnRlciBzdXBhYmFzZUFkbWluIGRpcmVjdGVtZW50XG4gICAgY29uc3QgeyBzdXBhYmFzZUFkbWluIH0gPSBhd2FpdCBpbXBvcnQoJ0AvbGliL2RiJyk7XG4gICAgXG4gICAgLy8gUsOpY3Vww6lyZXIgbGVzIHN0YXR1dHMgZGUgdGlja2V0c1xuICAgIGNvbnN0IHsgZGF0YTogc3RhdHVzZXMsIGVycm9yOiBzdGF0dXNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ3RpY2tldF9zdGF0dXNlcycpXG4gICAgICAuc2VsZWN0KCdpZCwgbmFtZScpO1xuXG4gICAgaWYgKHN0YXR1c0Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgc3RhdHV0czonLCBzdGF0dXNFcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gVsOpcmlmaWVyIHNpIGxlcyBzdGF0dXRzIGV4aXN0ZW50LCBzaW5vbiBsZXMgY3LDqWVyXG4gICAgbGV0IHN0YXR1c01hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgIFxuICAgIGlmICghc3RhdHVzZXMgfHwgc3RhdHVzZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZygnQXVjdW4gc3RhdHV0IHRyb3V2w6ksIGNyw6lhdGlvbiBkZXMgc3RhdHV0cyBwYXIgZMOpZmF1dC4uLicpO1xuICAgICAgXG4gICAgICAvLyBDcsOpZXIgbGVzIHN0YXR1dHMgcGFyIGTDqWZhdXRcbiAgICAgIGNvbnN0IGRlZmF1bHRTdGF0dXNlcyA9IFtcbiAgICAgICAgeyBuYW1lOiAnVG8gRG8nLCBjb2xvcjogJyM0Mjg3ZjUnLCBwb3NpdGlvbjogMCB9LFxuICAgICAgICB7IG5hbWU6ICdJbiBQcm9ncmVzcycsIGNvbG9yOiAnI2Y1YTE0MicsIHBvc2l0aW9uOiAxIH0sXG4gICAgICAgIHsgbmFtZTogJ0RvbmUnLCBjb2xvcjogJyM0MmY1NDUnLCBwb3NpdGlvbjogMiB9LFxuICAgICAgXTtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBzdGF0dXMgb2YgZGVmYXVsdFN0YXR1c2VzKSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgICAgICAuZnJvbSgndGlja2V0X3N0YXR1c2VzJylcbiAgICAgICAgICAuaW5zZXJ0KHN0YXR1cylcbiAgICAgICAgICAuc2VsZWN0KCk7XG4gICAgICAgICAgXG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBsb3JzIGRlIGxhIGNyw6lhdGlvbiBkdSBzdGF0dXQ6JywgZXJyb3IpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YVswXSkge1xuICAgICAgICAgIHN0YXR1c01hcFtzdGF0dXMubmFtZV0gPSBkYXRhWzBdLmlkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENyw6llciB1bmUgbWFwIGRlcyBzdGF0dXMgcG91ciBsZXMgcmV0cm91dmVyIGZhY2lsZW1lbnRcbiAgICAgIGZvciAoY29uc3Qgc3RhdHVzIG9mIHN0YXR1c2VzKSB7XG4gICAgICAgIHN0YXR1c01hcFtzdGF0dXMubmFtZV0gPSBzdGF0dXMuaWQ7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFBvdXIgY2hhcXVlIHRpY2tldCBwcmluY2lwYWwgKGVwaWMpXG4gICAgZm9yIChjb25zdCB0aWNrZXQgb2YgZ2VuZXJhdGVkVGlja2V0cykge1xuICAgICAgLy8gRMOpdGVybWluZXIgbGUgc3RhdHV0XG4gICAgICBjb25zdCBzdGF0dXNJZCA9IHN0YXR1c01hcFt0aWNrZXQuc3RhdHVzXSB8fCBzdGF0dXNNYXBbJ1RvIERvJ107XG4gICAgICBcbiAgICAgIC8vIENyw6llciBsZSB0aWNrZXQgcHJpbmNpcGFsXG4gICAgICBjb25zdCB7IGRhdGE6IGVwaWNEYXRhLCBlcnJvcjogZXBpY0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgIC5mcm9tKCd0aWNrZXRzJylcbiAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgdGl0bGU6IHRpY2tldC50aXRsZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogdGlja2V0LmRlc2NyaXB0aW9uLFxuICAgICAgICAgIHByb2plY3RfaWQ6IHByb2plY3RJZCxcbiAgICAgICAgICBzdGF0dXNfaWQ6IHN0YXR1c0lkLFxuICAgICAgICAgIGFzc2lnbmVkX3RvOiBudWxsLFxuICAgICAgICAgIGNyZWF0ZWRfYnk6IHVzZXJJZCxcbiAgICAgICAgICBwcmlvcml0eTogdGlja2V0LnByaW9yaXR5LFxuICAgICAgICAgIHBvc2l0aW9uOiAwXG4gICAgICAgIH0pXG4gICAgICAgIC5zZWxlY3QoKTtcbiAgICAgICAgXG4gICAgICBpZiAoZXBpY0Vycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBsb3JzIGRlIGxhIGNyw6lhdGlvbiBkdSB0aWNrZXQgcHJpbmNpcGFsOicsIGVwaWNFcnJvcik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTaSBsZSB0aWNrZXQgcHJpbmNpcGFsIGEgw6l0w6kgY3LDqcOpIGV0IHF1J2lsIGEgZGVzIHNvdXMtdGlja2V0c1xuICAgICAgaWYgKGVwaWNEYXRhICYmIGVwaWNEYXRhWzBdICYmIHRpY2tldC5zdWJUaWNrZXRzICYmIHRpY2tldC5zdWJUaWNrZXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgZXBpY0lkID0gZXBpY0RhdGFbMF0uaWQ7XG4gICAgICAgIFxuICAgICAgICAvLyBQb3VyIGNoYXF1ZSBzb3VzLXRpY2tldFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRpY2tldC5zdWJUaWNrZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3Qgc3ViVGlja2V0ID0gdGlja2V0LnN1YlRpY2tldHNbaV07XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRMOpdGVybWluZXIgbGUgc3RhdHV0IGR1IHNvdXMtdGlja2V0XG4gICAgICAgICAgY29uc3Qgc3ViVGlja2V0U3RhdHVzSWQgPSBzdGF0dXNNYXBbc3ViVGlja2V0LnN0YXR1c10gfHwgc3RhdHVzTWFwWydUbyBEbyddO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENyw6llciBsZSBzb3VzLXRpY2tldFxuICAgICAgICAgIGNvbnN0IHsgZXJyb3I6IHN1YlRpY2tldEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgICAgICAuZnJvbSgndGlja2V0cycpXG4gICAgICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICAgICAgdGl0bGU6IHN1YlRpY2tldC50aXRsZSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHN1YlRpY2tldC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgcHJvamVjdF9pZDogcHJvamVjdElkLFxuICAgICAgICAgICAgICBzdGF0dXNfaWQ6IHN1YlRpY2tldFN0YXR1c0lkLFxuICAgICAgICAgICAgICBhc3NpZ25lZF90bzogbnVsbCxcbiAgICAgICAgICAgICAgY3JlYXRlZF9ieTogdXNlcklkLFxuICAgICAgICAgICAgICBwcmlvcml0eTogc3ViVGlja2V0LnByaW9yaXR5LFxuICAgICAgICAgICAgICBwb3NpdGlvbjogaSxcbiAgICAgICAgICAgICAgcGFyZW50X3RpY2tldF9pZDogZXBpY0lkLFxuICAgICAgICAgICAgICBpc19zdWJfdGlja2V0OiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgIGlmIChzdWJUaWNrZXRFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGR1IHNvdXMtdGlja2V0OicsIHN1YlRpY2tldEVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRydWVcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGRlcyB0aWNrZXRzIGRhbnMgbGEgYmFzZSBkZSBkb25uw6llczpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuLy8gRm9uY3Rpb24gcG91ciBnw6luw6lyZXIgdW4gc291cy10aWNrZXQgYXZlYyBJQVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlU3ViVGlja2V0V2l0aEFJKFxuICBlcGljVGl0bGU6IHN0cmluZyxcbiAgZXBpY0Rlc2NyaXB0aW9uOiBzdHJpbmcsXG4gIHN1YlRpY2tldERlc2NyaXB0aW9uOiBzdHJpbmdcbik6IFByb21pc2U8YW55PiB7XG4gIGNvbnNvbGUubG9nKFwiR8OpbsOpcmF0aW9uIGRlIHNvdXMtdGlja2V0IGF2ZWMgcGFyYW3DqHRyZXM6XCIsIHtcbiAgICBlcGljVGl0bGUsXG4gICAgZXBpY0Rlc2NyaXB0aW9uOiBlcGljRGVzY3JpcHRpb24gPyBgJHtlcGljRGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDMwKX0uLi5gIDogXCIodmlkZSlcIixcbiAgICBzdWJUaWNrZXREZXNjcmlwdGlvbjogYCR7c3ViVGlja2V0RGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDMwKX0uLi5gXG4gIH0pO1xuICBcbiAgLy8gRMOpZmluaXIgdW5lIGxvbmd1ZXVyIGNpYmxlIHBvdXIgbGVzIGRlc2NyaXB0aW9ucyBkZSB0aWNrZXRzXG4gIGNvbnN0IFRBUkdFVF9ERVNDUklQVElPTl9MRU5HVEggPSA1MDA7XG4gIC8vIExhIGxpbWl0ZSBtYXhpbWFsZSByZXN0ZSDDoCA4MDAgY2FyYWN0w6hyZXNcbiAgY29uc3QgTUFYX0RFU0NSSVBUSU9OX0xFTkdUSCA9IDgwMDtcbiAgXG4gIGNvbnN0IHByb21wdCA9IGBcbiAgICBKZSBzdWlzIHVuIGFzc2lzdGFudCBkZSBnZXN0aW9uIGRlIHByb2pldCBldCBqJ2FpIGJlc29pbiBkZSBnw6luw6lyZXIgdW4gc291cy10aWNrZXQgdGVjaG5pcXVlIHBlcnRpbmVudCBcbiAgICBwb3VyIGwnZXBpYyBzdWl2YW50OiBcIiR7ZXBpY1RpdGxlfVwiLiBcbiAgICAke2VwaWNEZXNjcmlwdGlvbiA/IGBEZXNjcmlwdGlvbiBkZSBsJ2VwaWM6IFwiJHtlcGljRGVzY3JpcHRpb259XCJgIDogJyd9XG4gICAgXG4gICAgVm9pY2kgbGEgZGVzY3JpcHRpb24gZHUgc291cy10aWNrZXQgcXVlIGplIHZldXggY3LDqWVyOiBcIiR7c3ViVGlja2V0RGVzY3JpcHRpb259XCJcbiAgICBcbiAgICBHw6luw6hyZSB1biBzb3VzLXRpY2tldCB0ZWNobmlxdWUgYXBwcm9wcmnDqSBhdSBmb3JtYXQgSlNPTiBhdmVjIGxlcyBjaGFtcHMgc3VpdmFudHM6XG4gICAgLSB0aXRsZTogTGUgdGl0cmUgZG9pdCBzdWl2cmUgY2UgZm9ybWF0IGV4YWN0OiBcIlRpY2tldCBbTnVtIEVwaWNdLlggKERvbWFpbmUpIDogRGVzY3JpcHRpb24gY29uY2lzZVwiLiBcbiAgICAgIFBhciBleGVtcGxlIFwiVGlja2V0IDEuMyAoRnJvbnRlbmQpIDogSW1wbMOpbWVudGVyIGxhIHZhbGlkYXRpb24gZGUgZm9ybXVsYWlyZVwiXG4gICAgLSBkZXNjcmlwdGlvbjogVW5lIGRlc2NyaXB0aW9uIHRlY2huaXF1ZSBldCBhY3Rpb25uYWJsZSBhdmVjIGRlcyDDqXRhcGVzIHByw6ljaXNlc1xuICAgIC0gcHJpb3JpdHk6IFVuIG5vbWJyZSBlbnRyZSAxIChiYXNzZSkgZXQgMyAoaGF1dGUpIHBvdXIgcmVwcsOpc2VudGVyIGxhIHByaW9yaXTDqSBkdSB0aWNrZXRcbiAgICBcbiAgICBJTVBPUlRBTlQgOlxuICAgIC0gTGUgdGl0cmUgRE9JVCByZXNwZWN0ZXIgZXhhY3RlbWVudCBsZSBmb3JtYXQgc3DDqWNpZmnDqVxuICAgIC0gTGEgZGVzY3JpcHRpb24gRE9JVCDDqnRyZSB0ZWNobmlxdWUsIHByw6ljaXNlIGV0IGFjdGlvbm5hYmxlXG4gICAgLSBMYSBkZXNjcmlwdGlvbiBET0lUIGZhaXJlIGVudmlyb24gJHtUQVJHRVRfREVTQ1JJUFRJT05fTEVOR1RIfSBjYXJhY3TDqHJlcyAoZW50cmUgNDUwIGV0IDU1MClcbiAgICAtIExhIGRlc2NyaXB0aW9uIE5FIERPSVQgSkFNQUlTIGTDqXBhc3NlciAke01BWF9ERVNDUklQVElPTl9MRU5HVEh9IGNhcmFjdMOocmVzXG4gICAgLSBGb3VybmlzIHVuaXF1ZW1lbnQgbGUgSlNPTiBkZW1hbmTDqSwgc2FucyBhdWN1biB0ZXh0ZSBzdXBwbMOpbWVudGFpcmVcbiAgYFxuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBnZW5lcmF0ZVdpdGhHZW1pbmkocHJvbXB0KVxuICAgIFxuICAgIGlmICghcmVzcG9uc2UgfHwgcmVzcG9uc2UudHJpbSgpID09PSAnJykge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycmV1cjogUsOpcG9uc2UgdmlkZSBkZSBHZW1pbmlcIik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coXCJSw6lwb25zZSBicnV0ZSBkZSBHZW1pbmk6XCIsIHJlc3BvbnNlLnN1YnN0cmluZygwLCAxMDApICsgXCIuLi5cIik7XG4gICAgXG4gICAgLy8gQW5hbHlzZXIgbGEgcsOpcG9uc2UgSlNPTlxuICAgIGxldCBqc29uU3RyID0gcmVzcG9uc2U7XG4gICAgXG4gICAgLy8gU2kgbGEgcsOpcG9uc2UgY29udGllbnQgZHUgdGV4dGUgYXZhbnQgb3UgYXByw6hzIGxlIEpTT04sIHRlbnRlciBkZSBsJ2V4dHJhaXJlXG4gICAgY29uc3QganNvbk1hdGNoID0gcmVzcG9uc2UubWF0Y2goL1xce1tcXHNcXFNdKlxcfS8pO1xuICAgIGlmIChqc29uTWF0Y2gpIHtcbiAgICAgIGpzb25TdHIgPSBqc29uTWF0Y2hbMF07XG4gICAgICBjb25zb2xlLmxvZyhcIkpTT04gZXh0cmFpdDpcIiwganNvblN0ci5zdWJzdHJpbmcoMCwgMTAwKSArIFwiLi4uXCIpO1xuICAgIH1cbiAgICBcbiAgICAvLyBUZW50ZXIgZGUgcGFyc2VyIGxlIEpTT05cbiAgICBsZXQgdGlja2V0RGF0YTtcbiAgICB0cnkge1xuICAgICAgdGlja2V0RGF0YSA9IEpTT04ucGFyc2UoanNvblN0cik7XG4gICAgICBjb25zb2xlLmxvZyhcIlBhcnNpbmcgSlNPTiByw6l1c3NpXCIpO1xuICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgZGUgcGFyc2luZyBKU09OOlwiLCBwYXJzZUVycm9yKTtcbiAgICAgIFxuICAgICAgLy8gVGVudGF0aXZlIGRlIGNvcnJlY3Rpb24gZHUgSlNPTlxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gUmVtcGxhY2VyIGxlcyBndWlsbGVtZXRzIHNpbXBsZXMgcGFyIGRlcyBndWlsbGVtZXRzIGRvdWJsZXNcbiAgICAgICAgY29uc3QgY29ycmVjdGVkSnNvbiA9IGpzb25TdHIucmVwbGFjZSgvJy9nLCAnXCInKTtcbiAgICAgICAgdGlja2V0RGF0YSA9IEpTT04ucGFyc2UoY29ycmVjdGVkSnNvbik7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiUGFyc2luZyBKU09OIHLDqXVzc2kgYXByw6hzIGNvcnJlY3Rpb25cIik7XG4gICAgICB9IGNhdGNoIChzZWNvbmRQYXJzZUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLDiWNoZWMgZGUgbGEgY29ycmVjdGlvbiBkdSBKU09OOlwiLCBzZWNvbmRQYXJzZUVycm9yKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJKU09OIGluY29ycmVjdDpcIiwganNvblN0cik7XG4gICAgICAgIFxuICAgICAgICAvLyBDcsOpZXIgdW4gb2JqZXQgcGFyIGTDqWZhdXQgc2kgbGUgcGFyc2luZyDDqWNob3VlXG4gICAgICAgIHRpY2tldERhdGEgPSB7XG4gICAgICAgICAgdGl0bGU6IGBUaWNrZXQgWC5YIDogJHtzdWJUaWNrZXREZXNjcmlwdGlvbi5zdWJzdHJpbmcoMCwgNTApfS4uLmAsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGBTb3VzLXRpY2tldCBjcsOpw6kgw6AgcGFydGlyIGRlOiAke3N1YlRpY2tldERlc2NyaXB0aW9uLnN1YnN0cmluZygwLCA0MDApfWAsXG4gICAgICAgICAgcHJpb3JpdHk6IDJcbiAgICAgICAgfTtcbiAgICAgICAgY29uc29sZS5sb2coXCJVdGlsaXNhdGlvbiBkJ3VuIG9iamV0IHBhciBkw6lmYXV0XCIpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBWw6lyaWZpZXIgbGVzIGNoYW1wcyByZXF1aXNcbiAgICBpZiAoIXRpY2tldERhdGEudGl0bGUpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIlRpdHJlIG1hbnF1YW50IGRhbnMgbGEgcsOpcG9uc2UsIGNyw6lhdGlvbiBkJ3VuIHRpdHJlIHBhciBkw6lmYXV0XCIpO1xuICAgICAgdGlja2V0RGF0YS50aXRsZSA9IGBUaWNrZXQgWC5YIDogJHtzdWJUaWNrZXREZXNjcmlwdGlvbi5zdWJzdHJpbmcoMCwgNTApfS4uLmA7XG4gICAgfVxuICAgIFxuICAgIGlmICghdGlja2V0RGF0YS5kZXNjcmlwdGlvbikge1xuICAgICAgY29uc29sZS53YXJuKFwiRGVzY3JpcHRpb24gbWFucXVhbnRlIGRhbnMgbGEgcsOpcG9uc2UsIGNyw6lhdGlvbiBkJ3VuZSBkZXNjcmlwdGlvbiBwYXIgZMOpZmF1dFwiKTtcbiAgICAgIHRpY2tldERhdGEuZGVzY3JpcHRpb24gPSBgU291cy10aWNrZXQgY3LDqcOpIMOgIHBhcnRpciBkZTogJHtzdWJUaWNrZXREZXNjcmlwdGlvbi5zdWJzdHJpbmcoMCwgNDAwKX1gO1xuICAgIH1cbiAgICBcbiAgICAvLyBFeHRyYWlyZSBsZSBudW3DqXJvIGQnZXBpYyBkdSB0aXRyZVxuICAgIGNvbnN0IGVwaWNOdW1iZXJNYXRjaCA9IGVwaWNUaXRsZS5tYXRjaCgvRVBJQ1xccysoXFxkKykvaSk7XG4gICAgY29uc3QgZXBpY051bWJlciA9IGVwaWNOdW1iZXJNYXRjaCA/IGVwaWNOdW1iZXJNYXRjaFsxXSA6IFwiWFwiO1xuICAgIFxuICAgIC8vIEZvcm1hdGVyIGNvcnJlY3RlbWVudCBsZSB0aXRyZVxuICAgIHRpY2tldERhdGEudGl0bGUgPSB0aWNrZXREYXRhLnRpdGxlLnJlcGxhY2UoL1xcW1xcZCpcXF1cXC5YL2ksIGBbJHtlcGljTnVtYmVyfV0uWGApO1xuICAgIFxuICAgIC8vIFMnYXNzdXJlciBxdWUgbGUgdGl0cmUgYSB1biBmb3JtYXQgY29ycmVjdFxuICAgIGlmICghdGlja2V0RGF0YS50aXRsZS5tYXRjaCgvVGlja2V0XFxzK1xcW1xcdytcXF1cXC5YL2kpKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGb3JtYXQgZGUgdGl0cmUgaW5jb3JyZWN0LCBjb3JyZWN0aW9uXCIpO1xuICAgICAgdGlja2V0RGF0YS50aXRsZSA9IGBUaWNrZXQgWyR7ZXBpY051bWJlcn1dLlggOiAke3RpY2tldERhdGEudGl0bGUuc3Vic3RyaW5nKDAsIDUwKX1gO1xuICAgIH1cbiAgICBcbiAgICAvLyBBc3N1cmVyIGxlcyB2YWxldXJzIHBhciBkw6lmYXV0XG4gICAgdGlja2V0RGF0YS5zdGF0dXMgPSBcIlRvIERvXCI7XG4gICAgaWYgKCF0aWNrZXREYXRhLnByaW9yaXR5IHx8IHRpY2tldERhdGEucHJpb3JpdHkgPCAxIHx8IHRpY2tldERhdGEucHJpb3JpdHkgPiAzKSB7XG4gICAgICB0aWNrZXREYXRhLnByaW9yaXR5ID0gMjtcbiAgICB9XG4gICAgXG4gICAgLy8gVsOpcmlmaWVyIGxhIGxvbmd1ZXVyIGRlIGxhIGRlc2NyaXB0aW9uXG4gICAgaWYgKHRpY2tldERhdGEuZGVzY3JpcHRpb24ubGVuZ3RoID4gTUFYX0RFU0NSSVBUSU9OX0xFTkdUSCkge1xuICAgICAgY29uc29sZS5sb2coYERlc2NyaXB0aW9uIHRyb3AgbG9uZ3VlICgke3RpY2tldERhdGEuZGVzY3JpcHRpb24ubGVuZ3RofSBjYXJhY3TDqHJlcyksIHRyb25jYXR1cmUgw6AgJHtNQVhfREVTQ1JJUFRJT05fTEVOR1RIfWApO1xuICAgICAgdGlja2V0RGF0YS5kZXNjcmlwdGlvbiA9IHRpY2tldERhdGEuZGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIE1BWF9ERVNDUklQVElPTl9MRU5HVEgpO1xuICAgIH1cbiAgICBcbiAgICAvLyBBam91dGVyIHVuZSBwcm9wcmnDqXTDqSBkZSB2YWxpZGF0aW9uIHBvdXIgw6l2aXRlciBsZXMgZXJyZXVyc1xuICAgIHRpY2tldERhdGEudmFsaWQgPSB0cnVlO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKFwiU291cy10aWNrZXQgZ8OpbsOpcsOpIGF2ZWMgc3VjY8OoczpcIiwge1xuICAgICAgdGl0bGU6IHRpY2tldERhdGEudGl0bGUsXG4gICAgICBwcmlvcml0eTogdGlja2V0RGF0YS5wcmlvcml0eSxcbiAgICAgIGRlc2NyaXB0aW9uTGVuZ3RoOiB0aWNrZXREYXRhLmRlc2NyaXB0aW9uLmxlbmd0aFxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiB0aWNrZXREYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSBnw6luw6lyYXRpb24gZHUgc291cy10aWNrZXQ6XCIsIGVycm9yKTtcbiAgICBcbiAgICAvLyBDcsOpZXIgdW4gc291cy10aWNrZXQgcGFyIGTDqWZhdXQgZW4gY2FzIGQnZXJyZXVyIGfDqW7DqXJhbGVcbiAgICBjb25zdCBmYWxsYmFja1RpY2tldCA9IHtcbiAgICAgIHRpdGxlOiBgVGlja2V0IFguWCA6ICR7c3ViVGlja2V0RGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDUwKX0uLi5gLFxuICAgICAgZGVzY3JpcHRpb246IGBTb3VzLXRpY2tldCBjcsOpw6kgw6AgcGFydGlyIGRlOiAke3N1YlRpY2tldERlc2NyaXB0aW9uLnN1YnN0cmluZygwLCA0MDApfWAsXG4gICAgICBwcmlvcml0eTogMixcbiAgICAgIHN0YXR1czogXCJUbyBEb1wiLFxuICAgICAgdmFsaWQ6IHRydWVcbiAgICB9O1xuICAgIFxuICAgIGNvbnNvbGUubG9nKFwiVXRpbGlzYXRpb24gZCd1biBzb3VzLXRpY2tldCBkZSBzZWNvdXJzIHN1aXRlIMOgIHVuZSBlcnJldXJcIik7XG4gICAgcmV0dXJuIGZhbGxiYWNrVGlja2V0O1xuICB9XG59XG4iXSwibmFtZXMiOlsiR29vZ2xlR2VuZXJhdGl2ZUFJIiwiZ2VuZXJhdGVXaXRoR2VtaW5pIiwicHJvbXB0IiwiZ2VuQUkiLCJwcm9jZXNzIiwiZW52IiwiR09PR0xFX0FJX0FQSV9LRVkiLCJtb2RlbCIsImdldEdlbmVyYXRpdmVNb2RlbCIsInJlc3VsdCIsImdlbmVyYXRlQ29udGVudCIsInJlc3BvbnNlIiwidGV4dCIsImVycm9yIiwiY29uc29sZSIsImVuaGFuY2VQcm9qZWN0RGVzY3JpcHRpb24iLCJwcm9qZWN0TmFtZSIsImluc3BpcmF0aW9ucyIsImdlbmVyYXRlRmVhdHVyZUlkZWFzIiwicHJvamVjdERlc2NyaXB0aW9uIiwiY291bnQiLCJmZWF0dXJlcyIsIkpTT04iLCJwYXJzZSIsIm1hcCIsImZlYXR1cmUiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZ2VuZXJhdGVQcm9qZWN0VGlja2V0cyIsImpzb25NYXRjaCIsIm1hdGNoIiwiY2xlYW5Kc29uIiwidGlja2V0cyIsInByb2Nlc3NlZFRpY2tldHMiLCJ0aWNrZXQiLCJzdGF0dXMiLCJwcmlvcml0eSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInN1YlRpY2tldHMiLCJBcnJheSIsImlzQXJyYXkiLCJzdWJUaWNrZXQiLCJhdXRoQW5kUHJvZmlsZUVwaWNzIiwib3RoZXJFcGljcyIsImZvckVhY2giLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwicHVzaCIsImdlbmVyYXRlUHJvamVjdFRpY2tldHNGb3JtYXR0ZWQiLCJjcmVhdGVQcm9qZWN0VGlja2V0c0luREIiLCJwcm9qZWN0SWQiLCJnZW5lcmF0ZWRUaWNrZXRzIiwidXNlcklkIiwic3VwYWJhc2VBZG1pbiIsImRhdGEiLCJzdGF0dXNlcyIsInN0YXR1c0Vycm9yIiwiZnJvbSIsInNlbGVjdCIsInN0YXR1c01hcCIsImxlbmd0aCIsImxvZyIsImRlZmF1bHRTdGF0dXNlcyIsIm5hbWUiLCJjb2xvciIsInBvc2l0aW9uIiwiaW5zZXJ0IiwiaWQiLCJzdGF0dXNJZCIsImVwaWNEYXRhIiwiZXBpY0Vycm9yIiwicHJvamVjdF9pZCIsInN0YXR1c19pZCIsImFzc2lnbmVkX3RvIiwiY3JlYXRlZF9ieSIsImVwaWNJZCIsImkiLCJzdWJUaWNrZXRTdGF0dXNJZCIsInN1YlRpY2tldEVycm9yIiwicGFyZW50X3RpY2tldF9pZCIsImlzX3N1Yl90aWNrZXQiLCJnZW5lcmF0ZVN1YlRpY2tldFdpdGhBSSIsImVwaWNUaXRsZSIsImVwaWNEZXNjcmlwdGlvbiIsInN1YlRpY2tldERlc2NyaXB0aW9uIiwic3Vic3RyaW5nIiwiVEFSR0VUX0RFU0NSSVBUSU9OX0xFTkdUSCIsIk1BWF9ERVNDUklQVElPTl9MRU5HVEgiLCJ0cmltIiwianNvblN0ciIsInRpY2tldERhdGEiLCJwYXJzZUVycm9yIiwiY29ycmVjdGVkSnNvbiIsInJlcGxhY2UiLCJzZWNvbmRQYXJzZUVycm9yIiwid2FybiIsImVwaWNOdW1iZXJNYXRjaCIsImVwaWNOdW1iZXIiLCJ2YWxpZCIsImRlc2NyaXB0aW9uTGVuZ3RoIiwiZmFsbGJhY2tUaWNrZXQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/actions/gemini-integration.ts\n");

/***/ }),

/***/ "(rsc)/./app/api/tickets/ai-subticket/generate/route.ts":
/*!********************************************************!*\
  !*** ./app/api/tickets/ai-subticket/generate/route.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _app_actions_gemini_integration__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/app/actions/gemini-integration */ \"(rsc)/./app/actions/gemini-integration.ts\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n// Route pour générer un sous-ticket avec IA sans le créer (prévisualisation)\nasync function POST(req) {\n    try {\n        // Vérifier l'authentification\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_2__.getServerSession)();\n        if (!session?.user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n                error: \"Non autorisé\"\n            }, {\n                status: 401\n            });\n        }\n        // Récupérer les données de la requête\n        const requestData = await req.json();\n        console.log(\"Données reçues dans l'API:\", JSON.stringify(requestData));\n        const { epicId, epicTitle, epicDescription, subTicketDescription } = requestData;\n        if (!epicId || !epicTitle || !subTicketDescription) {\n            console.error(\"Données manquantes:\", {\n                epicId,\n                epicTitle,\n                subTicketDescription\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n                error: \"epicId, epicTitle et subTicketDescription sont requis\"\n            }, {\n                status: 400\n            });\n        }\n        // Générer le sous-ticket avec l'IA (sans le créer dans la base de données)\n        const generatedSubTicket = await (0,_app_actions_gemini_integration__WEBPACK_IMPORTED_MODULE_0__.generateSubTicketWithAI)(epicTitle, epicDescription || \"\", subTicketDescription);\n        if (!generatedSubTicket) {\n            console.error(\"Échec de génération du sous-ticket avec l'IA\");\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n                error: \"Erreur lors de la génération du sous-ticket\"\n            }, {\n                status: 500\n            });\n        }\n        console.log(\"Sous-ticket généré avec succès:\", JSON.stringify(generatedSubTicket));\n        // Retourner le sous-ticket généré pour prévisualisation\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json(generatedSubTicket);\n    } catch (error) {\n        console.error(\"Erreur dans l'API de génération de sous-ticket (prévisualisation):\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n            error: \"Erreur serveur\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3RpY2tldHMvYWktc3VidGlja2V0L2dlbmVyYXRlL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTJFO0FBQ25CO0FBQ1g7QUFFN0MsNkVBQTZFO0FBQ3RFLGVBQWVHLEtBQUtDLEdBQWdCO0lBQ3pDLElBQUk7UUFDRiw4QkFBOEI7UUFDOUIsTUFBTUMsVUFBVSxNQUFNSCwyREFBZ0JBO1FBQ3RDLElBQUksQ0FBQ0csU0FBU0MsTUFBTTtZQUNsQixPQUFPTCxxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO2dCQUFFQyxPQUFPO1lBQWUsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ3BFO1FBRUEsc0NBQXNDO1FBQ3RDLE1BQU1DLGNBQWMsTUFBTU4sSUFBSUcsSUFBSTtRQUNsQ0ksUUFBUUMsR0FBRyxDQUFDLDhCQUE4QkMsS0FBS0MsU0FBUyxDQUFDSjtRQUV6RCxNQUFNLEVBQUVLLE1BQU0sRUFBRUMsU0FBUyxFQUFFQyxlQUFlLEVBQUVDLG9CQUFvQixFQUFFLEdBQUdSO1FBRXJFLElBQUksQ0FBQ0ssVUFBVSxDQUFDQyxhQUFhLENBQUNFLHNCQUFzQjtZQUNsRFAsUUFBUUgsS0FBSyxDQUFDLHVCQUF1QjtnQkFBRU87Z0JBQVFDO2dCQUFXRTtZQUFxQjtZQUMvRSxPQUFPakIscURBQVlBLENBQUNNLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBd0QsR0FDakU7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDJFQUEyRTtRQUMzRSxNQUFNVSxxQkFBcUIsTUFBTW5CLHdGQUF1QkEsQ0FDdERnQixXQUNBQyxtQkFBbUIsSUFDbkJDO1FBR0YsSUFBSSxDQUFDQyxvQkFBb0I7WUFDdkJSLFFBQVFILEtBQUssQ0FBQztZQUNkLE9BQU9QLHFEQUFZQSxDQUFDTSxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQThDLEdBQ3ZEO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQUUsUUFBUUMsR0FBRyxDQUFDLG1DQUFtQ0MsS0FBS0MsU0FBUyxDQUFDSztRQUU5RCx3REFBd0Q7UUFDeEQsT0FBT2xCLHFEQUFZQSxDQUFDTSxJQUFJLENBQUNZO0lBRTNCLEVBQUUsT0FBT1gsT0FBTztRQUNkRyxRQUFRSCxLQUFLLENBQUMsc0VBQXNFQTtRQUNwRixPQUFPUCxxREFBWUEsQ0FBQ00sSUFBSSxDQUN0QjtZQUFFQyxPQUFPO1FBQWlCLEdBQzFCO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvY2hhcmxlcy1oZW5yeW5vYWgvRGVza3RvcC92aXppb24vVml6aW9uL2FwcC9hcGkvdGlja2V0cy9haS1zdWJ0aWNrZXQvZ2VuZXJhdGUvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2VuZXJhdGVTdWJUaWNrZXRXaXRoQUkgfSBmcm9tIFwiQC9hcHAvYWN0aW9ucy9nZW1pbmktaW50ZWdyYXRpb25cIjtcbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tIFwibmV4dC1hdXRoXCI7XG5cbi8vIFJvdXRlIHBvdXIgZ8OpbsOpcmVyIHVuIHNvdXMtdGlja2V0IGF2ZWMgSUEgc2FucyBsZSBjcsOpZXIgKHByw6l2aXN1YWxpc2F0aW9uKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIFbDqXJpZmllciBsJ2F1dGhlbnRpZmljYXRpb25cbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbigpO1xuICAgIGlmICghc2Vzc2lvbj8udXNlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiTm9uIGF1dG9yaXPDqVwiIH0sIHsgc3RhdHVzOiA0MDEgfSk7XG4gICAgfVxuXG4gICAgLy8gUsOpY3Vww6lyZXIgbGVzIGRvbm7DqWVzIGRlIGxhIHJlcXXDqnRlXG4gICAgY29uc3QgcmVxdWVzdERhdGEgPSBhd2FpdCByZXEuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKFwiRG9ubsOpZXMgcmXDp3VlcyBkYW5zIGwnQVBJOlwiLCBKU09OLnN0cmluZ2lmeShyZXF1ZXN0RGF0YSkpO1xuICAgIFxuICAgIGNvbnN0IHsgZXBpY0lkLCBlcGljVGl0bGUsIGVwaWNEZXNjcmlwdGlvbiwgc3ViVGlja2V0RGVzY3JpcHRpb24gfSA9IHJlcXVlc3REYXRhO1xuXG4gICAgaWYgKCFlcGljSWQgfHwgIWVwaWNUaXRsZSB8fCAhc3ViVGlja2V0RGVzY3JpcHRpb24pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJEb25uw6llcyBtYW5xdWFudGVzOlwiLCB7IGVwaWNJZCwgZXBpY1RpdGxlLCBzdWJUaWNrZXREZXNjcmlwdGlvbiB9KTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogXCJlcGljSWQsIGVwaWNUaXRsZSBldCBzdWJUaWNrZXREZXNjcmlwdGlvbiBzb250IHJlcXVpc1wiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBHw6luw6lyZXIgbGUgc291cy10aWNrZXQgYXZlYyBsJ0lBIChzYW5zIGxlIGNyw6llciBkYW5zIGxhIGJhc2UgZGUgZG9ubsOpZXMpXG4gICAgY29uc3QgZ2VuZXJhdGVkU3ViVGlja2V0ID0gYXdhaXQgZ2VuZXJhdGVTdWJUaWNrZXRXaXRoQUkoXG4gICAgICBlcGljVGl0bGUsXG4gICAgICBlcGljRGVzY3JpcHRpb24gfHwgXCJcIixcbiAgICAgIHN1YlRpY2tldERlc2NyaXB0aW9uXG4gICAgKTtcblxuICAgIGlmICghZ2VuZXJhdGVkU3ViVGlja2V0KSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiw4ljaGVjIGRlIGfDqW7DqXJhdGlvbiBkdSBzb3VzLXRpY2tldCBhdmVjIGwnSUFcIik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IFwiRXJyZXVyIGxvcnMgZGUgbGEgZ8OpbsOpcmF0aW9uIGR1IHNvdXMtdGlja2V0XCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFwiU291cy10aWNrZXQgZ8OpbsOpcsOpIGF2ZWMgc3VjY8OoczpcIiwgSlNPTi5zdHJpbmdpZnkoZ2VuZXJhdGVkU3ViVGlja2V0KSk7XG4gICAgXG4gICAgLy8gUmV0b3VybmVyIGxlIHNvdXMtdGlja2V0IGfDqW7DqXLDqSBwb3VyIHByw6l2aXN1YWxpc2F0aW9uXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGdlbmVyYXRlZFN1YlRpY2tldCk7XG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBkYW5zIGwnQVBJIGRlIGfDqW7DqXJhdGlvbiBkZSBzb3VzLXRpY2tldCAocHLDqXZpc3VhbGlzYXRpb24pOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogXCJFcnJldXIgc2VydmV1clwiIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsiZ2VuZXJhdGVTdWJUaWNrZXRXaXRoQUkiLCJOZXh0UmVzcG9uc2UiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiUE9TVCIsInJlcSIsInNlc3Npb24iLCJ1c2VyIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwicmVxdWVzdERhdGEiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsImVwaWNJZCIsImVwaWNUaXRsZSIsImVwaWNEZXNjcmlwdGlvbiIsInN1YlRpY2tldERlc2NyaXB0aW9uIiwiZ2VuZXJhdGVkU3ViVGlja2V0Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/tickets/ai-subticket/generate/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/@babel","vendor-chunks/oauth","vendor-chunks/preact","vendor-chunks/uuid","vendor-chunks/yallist","vendor-chunks/preact-render-to-string","vendor-chunks/cookie","vendor-chunks/oidc-token-hash","vendor-chunks/@panva","vendor-chunks/@google"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Ftickets%2Fai-subticket%2Fgenerate%2Froute&page=%2Fapi%2Ftickets%2Fai-subticket%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftickets%2Fai-subticket%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();
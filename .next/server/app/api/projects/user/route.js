/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/projects/user/route";
exports.ids = ["app/api/projects/user/route"];
exports.modules = {

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("bcrypt");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "perf_hooks":
/*!*****************************!*\
  !*** external "perf_hooks" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("perf_hooks");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprojects%2Fuser%2Froute&page=%2Fapi%2Fprojects%2Fuser%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprojects%2Fuser%2Froute.ts&appDir=%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprojects%2Fuser%2Froute&page=%2Fapi%2Fprojects%2Fuser%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprojects%2Fuser%2Froute.ts&appDir=%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_charles_henrynoah_Desktop_vizion_Vizion_app_api_projects_user_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/projects/user/route.ts */ \"(rsc)/./app/api/projects/user/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/projects/user/route\",\n        pathname: \"/api/projects/user\",\n        filename: \"route\",\n        bundlePath: \"app/api/projects/user/route\"\n    },\n    resolvedPagePath: \"/Users/charles-henrynoah/Desktop/vizion/Vizion/app/api/projects/user/route.ts\",\n    nextConfigOutput,\n    userland: _Users_charles_henrynoah_Desktop_vizion_Vizion_app_api_projects_user_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZwcm9qZWN0cyUyRnVzZXIlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnByb2plY3RzJTJGdXNlciUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnByb2plY3RzJTJGdXNlciUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmNoYXJsZXMtaGVucnlub2FoJTJGRGVza3RvcCUyRnZpemlvbiUyRlZpemlvbiUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZjaGFybGVzLWhlbnJ5bm9haCUyRkRlc2t0b3AlMkZ2aXppb24lMkZWaXppb24maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQzZCO0FBQzFHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvY2hhcmxlcy1oZW5yeW5vYWgvRGVza3RvcC92aXppb24vVml6aW9uL2FwcC9hcGkvcHJvamVjdHMvdXNlci9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcHJvamVjdHMvdXNlci9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Byb2plY3RzL3VzZXJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3Byb2plY3RzL3VzZXIvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvY2hhcmxlcy1oZW5yeW5vYWgvRGVza3RvcC92aXppb24vVml6aW9uL2FwcC9hcGkvcHJvamVjdHMvdXNlci9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprojects%2Fuser%2Froute&page=%2Fapi%2Fprojects%2Fuser%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprojects%2Fuser%2Froute.ts&appDir=%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/projects/user/route.ts":
/*!****************************************!*\
  !*** ./app/api/projects/user/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_auth_auth_options__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth/auth-options */ \"(rsc)/./lib/auth/auth-options.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n\n\n\n\nasync function GET(request) {\n    try {\n        // Vérifier si l'utilisateur est authentifié\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth_auth_options__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session || !session.user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Non autorisé\"\n            }, {\n                status: 401\n            });\n        }\n        const userId = session.user.id;\n        console.log(\"User ID:\", userId, \"Type:\", typeof userId);\n        try {\n            // Utiliser l'API Supabase pour récupérer les projets dont l'utilisateur est propriétaire\n            const { data: ownedProjects, error: ownedError } = await _lib_db__WEBPACK_IMPORTED_MODULE_3__.supabaseAdmin.from('projects').select('*').eq('owner_id', userId.toString()) // Conversion en chaîne pour éviter les problèmes de type\n            .eq('is_active', true);\n            if (ownedError) {\n                console.error(\"Erreur lors de la récupération des projets:\", ownedError);\n                throw ownedError;\n            }\n            // Récupérer les projets dont l'utilisateur est membre\n            const { data: memberProjects, error: memberError } = await _lib_db__WEBPACK_IMPORTED_MODULE_3__.supabaseAdmin.from('project_members').select('project_id, projects(*)').eq('user_id', userId.toString()) // Conversion en chaîne pour éviter les problèmes de type\n            .eq('projects.is_active', true);\n            if (memberError) {\n                console.error(\"Erreur lors de la récupération des projets membres:\", memberError);\n                throw memberError;\n            }\n            // Combiner les projets\n            const allProjects = [\n                ...ownedProjects || [],\n                ...(memberProjects || []).map((mp)=>mp.projects)\n            ];\n            // Éliminer les doublons\n            const uniqueProjects = Array.from(new Map(allProjects.map((project)=>[\n                    project.id,\n                    project\n                ])).values());\n            // Retourner le nombre de projets et les projets\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                count: uniqueProjects.length,\n                projects: uniqueProjects\n            });\n        } catch (dbError) {\n            console.error(\"Erreur de base de données:\", dbError);\n            // Retourner une réponse vide en cas d'erreur de base de données\n            // pour que le frontend puisse continuer à fonctionner\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                count: 0,\n                projects: [],\n                dbError: true\n            }, {\n                status: 200\n            }) // On retourne 200 pour éviter l'erreur côté client\n            ;\n        }\n    } catch (error) {\n        console.error(\"Erreur serveur:\", error);\n        // Même en cas d'erreur générale, on retourne une réponse valide\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            count: 0,\n            projects: [],\n            error: true\n        }, {\n            status: 200\n        }) // On retourne 200 pour éviter l'erreur côté client\n        ;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Byb2plY3RzL3VzZXIvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXVEO0FBQ1g7QUFDUztBQUNiO0FBRWpDLGVBQWVJLElBQUlDLE9BQW9CO0lBQzVDLElBQUk7UUFDRiw0Q0FBNEM7UUFDNUMsTUFBTUMsVUFBVSxNQUFNTCwyREFBZ0JBLENBQUNDLCtEQUFXQTtRQUNsRCxJQUFJLENBQUNJLFdBQVcsQ0FBQ0EsUUFBUUMsSUFBSSxFQUFFO1lBQzdCLE9BQU9QLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBZSxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDcEU7UUFFQSxNQUFNQyxTQUFTTCxRQUFRQyxJQUFJLENBQUNLLEVBQUU7UUFDOUJDLFFBQVFDLEdBQUcsQ0FBQyxZQUFZSCxRQUFRLFNBQVMsT0FBT0E7UUFFaEQsSUFBSTtZQUNGLHlGQUF5RjtZQUN6RixNQUFNLEVBQUVJLE1BQU1DLGFBQWEsRUFBRVAsT0FBT1EsVUFBVSxFQUFFLEdBQUcsTUFBTWQsa0RBQWFBLENBQ25FZSxJQUFJLENBQUMsWUFDTEMsTUFBTSxDQUFDLEtBQ1BDLEVBQUUsQ0FBQyxZQUFZVCxPQUFPVSxRQUFRLElBQUkseURBQXlEO2FBQzNGRCxFQUFFLENBQUMsYUFBYTtZQUVuQixJQUFJSCxZQUFZO2dCQUNkSixRQUFRSixLQUFLLENBQUMsK0NBQStDUTtnQkFDN0QsTUFBTUE7WUFDUjtZQUVBLHNEQUFzRDtZQUN0RCxNQUFNLEVBQUVGLE1BQU1PLGNBQWMsRUFBRWIsT0FBT2MsV0FBVyxFQUFFLEdBQUcsTUFBTXBCLGtEQUFhQSxDQUNyRWUsSUFBSSxDQUFDLG1CQUNMQyxNQUFNLENBQUMsMkJBQ1BDLEVBQUUsQ0FBQyxXQUFXVCxPQUFPVSxRQUFRLElBQUkseURBQXlEO2FBQzFGRCxFQUFFLENBQUMsc0JBQXNCO1lBRTVCLElBQUlHLGFBQWE7Z0JBQ2ZWLFFBQVFKLEtBQUssQ0FBQyx1REFBdURjO2dCQUNyRSxNQUFNQTtZQUNSO1lBRUEsdUJBQXVCO1lBQ3ZCLE1BQU1DLGNBQWM7bUJBQ2RSLGlCQUFpQixFQUFFO21CQUNwQixDQUFDTSxrQkFBa0IsRUFBRSxFQUFFRyxHQUFHLENBQUNDLENBQUFBLEtBQU1BLEdBQUdDLFFBQVE7YUFDaEQ7WUFFRCx3QkFBd0I7WUFDeEIsTUFBTUMsaUJBQWlCQyxNQUFNWCxJQUFJLENBQy9CLElBQUlZLElBQUlOLFlBQVlDLEdBQUcsQ0FBQ00sQ0FBQUEsVUFBVztvQkFBQ0EsUUFBUW5CLEVBQUU7b0JBQUVtQjtpQkFBUSxHQUFHQyxNQUFNO1lBR25FLGdEQUFnRDtZQUNoRCxPQUFPaEMscURBQVlBLENBQUNRLElBQUksQ0FBQztnQkFDdkJ5QixPQUFPTCxlQUFlTSxNQUFNO2dCQUM1QlAsVUFBVUM7WUFDWjtRQUNGLEVBQUUsT0FBT08sU0FBUztZQUNoQnRCLFFBQVFKLEtBQUssQ0FBQyw4QkFBOEIwQjtZQUU1QyxnRUFBZ0U7WUFDaEUsc0RBQXNEO1lBQ3RELE9BQU9uQyxxREFBWUEsQ0FBQ1EsSUFBSSxDQUFDO2dCQUN2QnlCLE9BQU87Z0JBQ1BOLFVBQVUsRUFBRTtnQkFDWlEsU0FBUztZQUNYLEdBQUc7Z0JBQUV6QixRQUFRO1lBQUksR0FBRyxtREFBbUQ7O1FBQ3pFO0lBQ0YsRUFBRSxPQUFPRCxPQUFPO1FBQ2RJLFFBQVFKLEtBQUssQ0FBQyxtQkFBbUJBO1FBRWpDLGdFQUFnRTtRQUNoRSxPQUFPVCxxREFBWUEsQ0FBQ1EsSUFBSSxDQUFDO1lBQ3ZCeUIsT0FBTztZQUNQTixVQUFVLEVBQUU7WUFDWmxCLE9BQU87UUFDVCxHQUFHO1lBQUVDLFFBQVE7UUFBSSxHQUFHLG1EQUFtRDs7SUFDekU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL2NoYXJsZXMtaGVucnlub2FoL0Rlc2t0b3Avdml6aW9uL1Zpemlvbi9hcHAvYXBpL3Byb2plY3RzL3VzZXIvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiXG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSBcIm5leHQtYXV0aFwiXG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gXCJAL2xpYi9hdXRoL2F1dGgtb3B0aW9uc1wiXG5pbXBvcnQgeyBzdXBhYmFzZUFkbWluIH0gZnJvbSAnQC9saWIvZGInXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyBWw6lyaWZpZXIgc2kgbCd1dGlsaXNhdGV1ciBlc3QgYXV0aGVudGlmacOpXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpXG4gICAgaWYgKCFzZXNzaW9uIHx8ICFzZXNzaW9uLnVzZXIpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIk5vbiBhdXRvcmlzw6lcIiB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgfVxuXG4gICAgY29uc3QgdXNlcklkID0gc2Vzc2lvbi51c2VyLmlkXG4gICAgY29uc29sZS5sb2coXCJVc2VyIElEOlwiLCB1c2VySWQsIFwiVHlwZTpcIiwgdHlwZW9mIHVzZXJJZClcblxuICAgIHRyeSB7XG4gICAgICAvLyBVdGlsaXNlciBsJ0FQSSBTdXBhYmFzZSBwb3VyIHLDqWN1cMOpcmVyIGxlcyBwcm9qZXRzIGRvbnQgbCd1dGlsaXNhdGV1ciBlc3QgcHJvcHJpw6l0YWlyZVxuICAgICAgY29uc3QgeyBkYXRhOiBvd25lZFByb2plY3RzLCBlcnJvcjogb3duZWRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgncHJvamVjdHMnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLmVxKCdvd25lcl9pZCcsIHVzZXJJZC50b1N0cmluZygpKSAvLyBDb252ZXJzaW9uIGVuIGNoYcOubmUgcG91ciDDqXZpdGVyIGxlcyBwcm9ibMOobWVzIGRlIHR5cGVcbiAgICAgICAgLmVxKCdpc19hY3RpdmUnLCB0cnVlKVxuXG4gICAgICBpZiAob3duZWRFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbGEgcsOpY3Vww6lyYXRpb24gZGVzIHByb2pldHM6XCIsIG93bmVkRXJyb3IpXG4gICAgICAgIHRocm93IG93bmVkRXJyb3JcbiAgICAgIH1cblxuICAgICAgLy8gUsOpY3Vww6lyZXIgbGVzIHByb2pldHMgZG9udCBsJ3V0aWxpc2F0ZXVyIGVzdCBtZW1icmVcbiAgICAgIGNvbnN0IHsgZGF0YTogbWVtYmVyUHJvamVjdHMsIGVycm9yOiBtZW1iZXJFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgICAuZnJvbSgncHJvamVjdF9tZW1iZXJzJylcbiAgICAgICAgLnNlbGVjdCgncHJvamVjdF9pZCwgcHJvamVjdHMoKiknKVxuICAgICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQudG9TdHJpbmcoKSkgLy8gQ29udmVyc2lvbiBlbiBjaGHDrm5lIHBvdXIgw6l2aXRlciBsZXMgcHJvYmzDqG1lcyBkZSB0eXBlXG4gICAgICAgIC5lcSgncHJvamVjdHMuaXNfYWN0aXZlJywgdHJ1ZSlcblxuICAgICAgaWYgKG1lbWJlckVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgbG9ycyBkZSBsYSByw6ljdXDDqXJhdGlvbiBkZXMgcHJvamV0cyBtZW1icmVzOlwiLCBtZW1iZXJFcnJvcilcbiAgICAgICAgdGhyb3cgbWVtYmVyRXJyb3JcbiAgICAgIH1cblxuICAgICAgLy8gQ29tYmluZXIgbGVzIHByb2pldHNcbiAgICAgIGNvbnN0IGFsbFByb2plY3RzID0gW1xuICAgICAgICAuLi4ob3duZWRQcm9qZWN0cyB8fCBbXSksXG4gICAgICAgIC4uLihtZW1iZXJQcm9qZWN0cyB8fCBbXSkubWFwKG1wID0+IG1wLnByb2plY3RzKVxuICAgICAgXVxuXG4gICAgICAvLyDDiWxpbWluZXIgbGVzIGRvdWJsb25zXG4gICAgICBjb25zdCB1bmlxdWVQcm9qZWN0cyA9IEFycmF5LmZyb20oXG4gICAgICAgIG5ldyBNYXAoYWxsUHJvamVjdHMubWFwKHByb2plY3QgPT4gW3Byb2plY3QuaWQsIHByb2plY3RdKSkudmFsdWVzKClcbiAgICAgIClcblxuICAgICAgLy8gUmV0b3VybmVyIGxlIG5vbWJyZSBkZSBwcm9qZXRzIGV0IGxlcyBwcm9qZXRzXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBjb3VudDogdW5pcXVlUHJvamVjdHMubGVuZ3RoLFxuICAgICAgICBwcm9qZWN0czogdW5pcXVlUHJvamVjdHNcbiAgICAgIH0pXG4gICAgfSBjYXRjaCAoZGJFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBkZSBiYXNlIGRlIGRvbm7DqWVzOlwiLCBkYkVycm9yKVxuICAgICAgXG4gICAgICAvLyBSZXRvdXJuZXIgdW5lIHLDqXBvbnNlIHZpZGUgZW4gY2FzIGQnZXJyZXVyIGRlIGJhc2UgZGUgZG9ubsOpZXNcbiAgICAgIC8vIHBvdXIgcXVlIGxlIGZyb250ZW5kIHB1aXNzZSBjb250aW51ZXIgw6AgZm9uY3Rpb25uZXJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIGNvdW50OiAwLFxuICAgICAgICBwcm9qZWN0czogW10sXG4gICAgICAgIGRiRXJyb3I6IHRydWVcbiAgICAgIH0sIHsgc3RhdHVzOiAyMDAgfSkgLy8gT24gcmV0b3VybmUgMjAwIHBvdXIgw6l2aXRlciBsJ2VycmV1ciBjw7R0w6kgY2xpZW50XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJldXIgc2VydmV1cjpcIiwgZXJyb3IpXG4gICAgXG4gICAgLy8gTcOqbWUgZW4gY2FzIGQnZXJyZXVyIGfDqW7DqXJhbGUsIG9uIHJldG91cm5lIHVuZSByw6lwb25zZSB2YWxpZGVcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgY291bnQ6IDAsXG4gICAgICBwcm9qZWN0czogW10sXG4gICAgICBlcnJvcjogdHJ1ZVxuICAgIH0sIHsgc3RhdHVzOiAyMDAgfSkgLy8gT24gcmV0b3VybmUgMjAwIHBvdXIgw6l2aXRlciBsJ2VycmV1ciBjw7R0w6kgY2xpZW50XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiYXV0aE9wdGlvbnMiLCJzdXBhYmFzZUFkbWluIiwiR0VUIiwicmVxdWVzdCIsInNlc3Npb24iLCJ1c2VyIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwidXNlcklkIiwiaWQiLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsIm93bmVkUHJvamVjdHMiLCJvd25lZEVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwidG9TdHJpbmciLCJtZW1iZXJQcm9qZWN0cyIsIm1lbWJlckVycm9yIiwiYWxsUHJvamVjdHMiLCJtYXAiLCJtcCIsInByb2plY3RzIiwidW5pcXVlUHJvamVjdHMiLCJBcnJheSIsIk1hcCIsInByb2plY3QiLCJ2YWx1ZXMiLCJjb3VudCIsImxlbmd0aCIsImRiRXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/projects/user/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth/auth-options.ts":
/*!**********************************!*\
  !*** ./lib/auth/auth-options.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/github */ \"(rsc)/./node_modules/next-auth/providers/github.js\");\n/* harmony import */ var _db_queries__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./db-queries */ \"(rsc)/./lib/auth/db-queries.ts\");\n\n\n\n\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    return null;\n                }\n                try {\n                    const user = await (0,_db_queries__WEBPACK_IMPORTED_MODULE_3__.verifyUserCredentials)(credentials.email, credentials.password);\n                    return user;\n                } catch (error) {\n                    console.error(\"Error during authentication:\", error);\n                    return null;\n                }\n            }\n        }),\n        (0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            clientId: process.env.GOOGLE_CLIENT_ID || \"\",\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET || \"\"\n        }),\n        (0,next_auth_providers_github__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            clientId: process.env.GITHUB_ID || \"\",\n            clientSecret: process.env.GITHUB_SECRET || \"\"\n        })\n    ],\n    pages: {\n        signIn: \"/login\",\n        signOut: \"/\",\n        error: \"/login\"\n    },\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.id = user.id;\n                token.name = user.name;\n                token.email = user.email;\n                token.picture = user.avatar || user.profile_photo;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token && session.user) {\n                session.user.id = token.id;\n                session.user.name = token.name;\n                session.user.email = token.email;\n                session.user.image = token.picture;\n            }\n            return session;\n        }\n    },\n    secret: process.env.NEXTAUTH_SECRET,\n    debug: \"development\" === \"development\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC9hdXRoLW9wdGlvbnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFDa0U7QUFDVjtBQUNBO0FBQ0g7QUFFOUMsTUFBTUksY0FBK0I7SUFDMUNDLFdBQVc7UUFDVEwsMkVBQW1CQSxDQUFDO1lBQ2xCTSxNQUFNO1lBQ05DLGFBQWE7Z0JBQ1hDLE9BQU87b0JBQUVDLE9BQU87b0JBQVNDLE1BQU07Z0JBQVE7Z0JBQ3ZDQyxVQUFVO29CQUFFRixPQUFPO29CQUFZQyxNQUFNO2dCQUFXO1lBQ2xEO1lBQ0EsTUFBTUUsV0FBVUwsV0FBVztnQkFDekIsSUFBSSxDQUFDQSxhQUFhQyxTQUFTLENBQUNELGFBQWFJLFVBQVU7b0JBQ2pELE9BQU87Z0JBQ1Q7Z0JBRUEsSUFBSTtvQkFDRixNQUFNRSxPQUFPLE1BQU1WLGtFQUFxQkEsQ0FDdENJLFlBQVlDLEtBQUssRUFDakJELFlBQVlJLFFBQVE7b0JBRXRCLE9BQU9FO2dCQUNULEVBQUUsT0FBT0MsT0FBTztvQkFDZEMsUUFBUUQsS0FBSyxDQUFDLGdDQUFnQ0E7b0JBQzlDLE9BQU87Z0JBQ1Q7WUFDRjtRQUNGO1FBQ0FiLHNFQUFjQSxDQUFDO1lBQ2JlLFVBQVVDLFFBQVFDLEdBQUcsQ0FBQ0MsZ0JBQWdCLElBQUk7WUFDMUNDLGNBQWNILFFBQVFDLEdBQUcsQ0FBQ0csb0JBQW9CLElBQUk7UUFDcEQ7UUFDQW5CLHNFQUFjQSxDQUFDO1lBQ2JjLFVBQVVDLFFBQVFDLEdBQUcsQ0FBQ0ksU0FBUyxJQUFJO1lBQ25DRixjQUFjSCxRQUFRQyxHQUFHLENBQUNLLGFBQWEsSUFBSTtRQUM3QztLQUNEO0lBQ0RDLE9BQU87UUFDTEMsUUFBUTtRQUNSQyxTQUFTO1FBQ1RaLE9BQU87SUFDVDtJQUNBYSxTQUFTO1FBQ1BDLFVBQVU7UUFDVkMsUUFBUSxLQUFLLEtBQUssS0FBSztJQUN6QjtJQUNBQyxXQUFXO1FBQ1QsTUFBTUMsS0FBSSxFQUFFQyxLQUFLLEVBQUVuQixJQUFJLEVBQUU7WUFDdkIsSUFBSUEsTUFBTTtnQkFDUm1CLE1BQU1DLEVBQUUsR0FBR3BCLEtBQUtvQixFQUFFO2dCQUNsQkQsTUFBTTFCLElBQUksR0FBR08sS0FBS1AsSUFBSTtnQkFDdEIwQixNQUFNeEIsS0FBSyxHQUFHSyxLQUFLTCxLQUFLO2dCQUN4QndCLE1BQU1FLE9BQU8sR0FBR3JCLEtBQUtzQixNQUFNLElBQUl0QixLQUFLdUIsYUFBYTtZQUNuRDtZQUNBLE9BQU9KO1FBQ1Q7UUFDQSxNQUFNTCxTQUFRLEVBQUVBLE9BQU8sRUFBRUssS0FBSyxFQUFFO1lBQzlCLElBQUlBLFNBQVNMLFFBQVFkLElBQUksRUFBRTtnQkFDekJjLFFBQVFkLElBQUksQ0FBQ29CLEVBQUUsR0FBR0QsTUFBTUMsRUFBRTtnQkFDMUJOLFFBQVFkLElBQUksQ0FBQ1AsSUFBSSxHQUFHMEIsTUFBTTFCLElBQUk7Z0JBQzlCcUIsUUFBUWQsSUFBSSxDQUFDTCxLQUFLLEdBQUd3QixNQUFNeEIsS0FBSztnQkFDaENtQixRQUFRZCxJQUFJLENBQUN3QixLQUFLLEdBQUdMLE1BQU1FLE9BQU87WUFDcEM7WUFDQSxPQUFPUDtRQUNUO0lBQ0Y7SUFDQVcsUUFBUXJCLFFBQVFDLEdBQUcsQ0FBQ3FCLGVBQWU7SUFDbkNDLE9BQU92QixrQkFBeUI7QUFDbEMsRUFBRSIsInNvdXJjZXMiOlsiL1VzZXJzL2NoYXJsZXMtaGVucnlub2FoL0Rlc2t0b3Avdml6aW9uL1Zpemlvbi9saWIvYXV0aC9hdXRoLW9wdGlvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEF1dGhPcHRpb25zIH0gZnJvbSBcIm5leHQtYXV0aFwiO1xuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHNcIjtcbmltcG9ydCBHb29nbGVQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9nb29nbGVcIjtcbmltcG9ydCBHaXRIdWJQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9naXRodWJcIjtcbmltcG9ydCB7IHZlcmlmeVVzZXJDcmVkZW50aWFscyB9IGZyb20gXCIuL2RiLXF1ZXJpZXNcIjtcblxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBOZXh0QXV0aE9wdGlvbnMgPSB7XG4gIHByb3ZpZGVyczogW1xuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogXCJjcmVkZW50aWFsc1wiLFxuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6IFwiRW1haWxcIiwgdHlwZTogXCJlbWFpbFwiIH0sXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiBcIlBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiB9XG4gICAgICB9LFxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHZlcmlmeVVzZXJDcmVkZW50aWFscyhcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzLmVtYWlsLFxuICAgICAgICAgICAgY3JlZGVudGlhbHMucGFzc3dvcmRcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkdXJpbmcgYXV0aGVudGljYXRpb246XCIsIGVycm9yKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLFxuICAgIEdvb2dsZVByb3ZpZGVyKHtcbiAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX0lEIHx8IFwiXCIsXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfU0VDUkVUIHx8IFwiXCIsXG4gICAgfSksXG4gICAgR2l0SHViUHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdJVEhVQl9JRCB8fCBcIlwiLFxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HSVRIVUJfU0VDUkVUIHx8IFwiXCIsXG4gICAgfSksXG4gIF0sXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiBcIi9sb2dpblwiLFxuICAgIHNpZ25PdXQ6IFwiL1wiLFxuICAgIGVycm9yOiBcIi9sb2dpblwiLFxuICB9LFxuICBzZXNzaW9uOiB7XG4gICAgc3RyYXRlZ3k6IFwiand0XCIsXG4gICAgbWF4QWdlOiAzMCAqIDI0ICogNjAgKiA2MCwgLy8gMzAgZGF5c1xuICB9LFxuICBjYWxsYmFja3M6IHtcbiAgICBhc3luYyBqd3QoeyB0b2tlbiwgdXNlciB9KSB7XG4gICAgICBpZiAodXNlcikge1xuICAgICAgICB0b2tlbi5pZCA9IHVzZXIuaWQ7XG4gICAgICAgIHRva2VuLm5hbWUgPSB1c2VyLm5hbWU7XG4gICAgICAgIHRva2VuLmVtYWlsID0gdXNlci5lbWFpbDtcbiAgICAgICAgdG9rZW4ucGljdHVyZSA9IHVzZXIuYXZhdGFyIHx8IHVzZXIucHJvZmlsZV9waG90bztcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9LFxuICAgIGFzeW5jIHNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KSB7XG4gICAgICBpZiAodG9rZW4gJiYgc2Vzc2lvbi51c2VyKSB7XG4gICAgICAgIHNlc3Npb24udXNlci5pZCA9IHRva2VuLmlkIGFzIHN0cmluZztcbiAgICAgICAgc2Vzc2lvbi51c2VyLm5hbWUgPSB0b2tlbi5uYW1lO1xuICAgICAgICBzZXNzaW9uLnVzZXIuZW1haWwgPSB0b2tlbi5lbWFpbCBhcyBzdHJpbmc7XG4gICAgICAgIHNlc3Npb24udXNlci5pbWFnZSA9IHRva2VuLnBpY3R1cmUgYXMgc3RyaW5nO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfSxcbiAgfSxcbiAgc2VjcmV0OiBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQsXG4gIGRlYnVnOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiLFxufTtcbiJdLCJuYW1lcyI6WyJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiR29vZ2xlUHJvdmlkZXIiLCJHaXRIdWJQcm92aWRlciIsInZlcmlmeVVzZXJDcmVkZW50aWFscyIsImF1dGhPcHRpb25zIiwicHJvdmlkZXJzIiwibmFtZSIsImNyZWRlbnRpYWxzIiwiZW1haWwiLCJsYWJlbCIsInR5cGUiLCJwYXNzd29yZCIsImF1dGhvcml6ZSIsInVzZXIiLCJlcnJvciIsImNvbnNvbGUiLCJjbGllbnRJZCIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJHSVRIVUJfSUQiLCJHSVRIVUJfU0VDUkVUIiwicGFnZXMiLCJzaWduSW4iLCJzaWduT3V0Iiwic2Vzc2lvbiIsInN0cmF0ZWd5IiwibWF4QWdlIiwiY2FsbGJhY2tzIiwiand0IiwidG9rZW4iLCJpZCIsInBpY3R1cmUiLCJhdmF0YXIiLCJwcm9maWxlX3Bob3RvIiwiaW1hZ2UiLCJzZWNyZXQiLCJORVhUQVVUSF9TRUNSRVQiLCJkZWJ1ZyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth/auth-options.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth/db-queries.ts":
/*!********************************!*\
  !*** ./lib/auth/db-queries.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   findOrCreateOAuthUser: () => (/* binding */ findOrCreateOAuthUser),\n/* harmony export */   verifyUserCredentials: () => (/* binding */ verifyUserCredentials)\n/* harmony export */ });\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bcrypt__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n\n// Créer le client Supabase\nconst supabaseUrl = \"https://ffwfdogonvgzudzsdcri.supabase.co\" || 0;\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZmd2Zkb2dvbnZnenVkenNkY3JpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMzMTg1MDQsImV4cCI6MjA1ODg5NDUwNH0.dfUnoBwD56sgNINPI-tLAuaMJ7PuGPuQanAJ_YrwOGI\" || 0;\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(supabaseUrl, supabaseKey);\n/**\n * Vérifie les identifiants de l'utilisateur pour l'authentification\n */ async function verifyUserCredentials(email, password) {\n    try {\n        console.log(`Attempting to verify credentials for email: ${email}`);\n        // Rechercher l'utilisateur par email\n        const { data, error } = await supabase.from('users').select('id, email, name, password, avatar').eq('email', email).maybeSingle(); // Using maybeSingle instead of single to avoid errors when no user is found\n        console.log('Database query result:', {\n            data,\n            error\n        });\n        if (error) {\n            console.error('Error querying user:', error);\n            throw new Error('Database error during authentication');\n        }\n        if (!data) {\n            console.log('No user found with this email');\n            throw new Error('No user found with this email');\n        }\n        // Vérifier le mot de passe\n        console.log('Comparing passwords...');\n        const passwordMatch = await (0,bcrypt__WEBPACK_IMPORTED_MODULE_0__.compare)(password, data.password);\n        console.log('Password match result:', passwordMatch);\n        if (!passwordMatch) {\n            throw new Error('Invalid credentials');\n        }\n        // Retourner les informations de l'utilisateur sans le mot de passe\n        console.log('Authentication successful for user:', data.email);\n        return {\n            id: data.id,\n            email: data.email,\n            name: data.name,\n            image: data.avatar\n        };\n    } catch (error) {\n        console.error('Authentication error:', error);\n        if (error instanceof Error) {\n            throw error; // Propager l'erreur avec le message spécifique\n        }\n        throw new Error('Authentication failed');\n    }\n}\n/**\n * Trouve ou crée un utilisateur à partir d'un profil OAuth (GitHub, Google, etc.)\n */ async function findOrCreateOAuthUser(profile, provider) {\n    try {\n        console.log('Profil OAuth reçu:', JSON.stringify(profile, null, 2));\n        console.log('Fournisseur:', provider);\n        // Vérifier que le profil contient un email\n        if (!profile.email) {\n            console.error('Profil OAuth sans email:', JSON.stringify(profile, null, 2));\n            throw new Error('Le profil OAuth ne contient pas d\\'email');\n        }\n        // Extraire les informations du profil en fonction du fournisseur\n        let userName = profile.name;\n        let userImage = profile.image || profile.picture || profile.avatar_url;\n        // Traitement spécifique pour Google\n        if (provider === 'google') {\n            // Google fournit souvent le nom dans des propriétés séparées\n            if (profile.given_name && profile.family_name) {\n                userName = `${profile.given_name} ${profile.family_name}`;\n            }\n            // Google fournit l'image dans profile.picture\n            userImage = profile.picture || userImage;\n            console.log('Informations extraites pour Google:', {\n                userName,\n                userImage,\n                email: profile.email\n            });\n        }\n        // Traitement spécifique pour GitHub\n        if (provider === 'github') {\n            // GitHub fournit l'image dans profile.avatar_url\n            userImage = profile.avatar_url || userImage;\n            console.log('Informations extraites pour GitHub:', {\n                userName,\n                userImage,\n                email: profile.email\n            });\n        }\n        // Vérifier si l'utilisateur existe déjà\n        const { data: existingUser, error: searchError } = await supabase.from('users').select('id, email, name, avatar').eq('email', profile.email).single();\n        if (searchError && searchError.code !== 'PGRST116') {\n            console.error('Erreur lors de la recherche de l\\'utilisateur:', searchError);\n            throw searchError;\n        }\n        // Si l'utilisateur existe, le retourner\n        if (existingUser) {\n            console.log('Utilisateur existant trouvé:', existingUser);\n            return {\n                id: existingUser.id,\n                email: existingUser.email,\n                name: existingUser.name,\n                image: existingUser.avatar\n            };\n        }\n        console.log('Création d\\'un nouvel utilisateur OAuth avec les données:', {\n            email: profile.email,\n            name: userName,\n            avatar: userImage,\n            provider\n        });\n        // Sinon, créer un nouvel utilisateur\n        const { data: newUser, error: createError } = await supabase.from('users').insert({\n            email: profile.email,\n            name: userName || `${provider} User`,\n            avatar: userImage || null,\n            // Pas de mot de passe pour les utilisateurs OAuth\n            password: null,\n            is_active: true\n        }).select('id, email, name, avatar').single();\n        if (createError) {\n            console.error('Erreur lors de la création de l\\'utilisateur:', createError);\n            throw createError;\n        }\n        console.log('Nouvel utilisateur créé avec succès:', newUser);\n        return {\n            id: newUser.id,\n            email: newUser.email,\n            name: newUser.name,\n            image: newUser.avatar\n        };\n    } catch (error) {\n        console.error('Erreur dans findOrCreateOAuthUser:', error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVc7UUFDYixHQUNDM0IsTUFBTSxDQUFDLDJCQUNQc0IsTUFBTTtRQUVULElBQUlHLGFBQWE7WUFDZjlCLFFBQVFHLEtBQUssQ0FBQyxpREFBaUQyQjtZQUMvRCxNQUFNQTtRQUNSO1FBRUE5QixRQUFRQyxHQUFHLENBQUMsd0NBQXdDNEI7UUFDcEQsT0FBTztZQUNMbkIsSUFBSW1CLFFBQVFuQixFQUFFO1lBQ2RaLE9BQU8rQixRQUFRL0IsS0FBSztZQUNwQmEsTUFBTWtCLFFBQVFsQixJQUFJO1lBQ2xCQyxPQUFPaUIsUUFBUWhCLE1BQU07UUFDdkI7SUFDRixFQUFFLE9BQU9WLE9BQU87UUFDZEgsUUFBUUcsS0FBSyxDQUFDLHNDQUFzQ0E7UUFDcEQsTUFBTUE7SUFDUjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvY2hhcmxlcy1oZW5yeW5vYWgvRGVza3RvcC92aXppb24vVml6aW9uL2xpYi9hdXRoL2RiLXF1ZXJpZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29tcGFyZSB9IGZyb20gJ2JjcnlwdCc7XG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuXG4vLyBDcsOpZXIgbGUgY2xpZW50IFN1cGFiYXNlXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCB8fCAnJztcbmNvbnN0IHN1cGFiYXNlS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgfHwgJyc7XG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VLZXkpO1xuXG4vKipcbiAqIFbDqXJpZmllIGxlcyBpZGVudGlmaWFudHMgZGUgbCd1dGlsaXNhdGV1ciBwb3VyIGwnYXV0aGVudGlmaWNhdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5VXNlckNyZWRlbnRpYWxzKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhgQXR0ZW1wdGluZyB0byB2ZXJpZnkgY3JlZGVudGlhbHMgZm9yIGVtYWlsOiAke2VtYWlsfWApO1xuICAgIFxuICAgIC8vIFJlY2hlcmNoZXIgbCd1dGlsaXNhdGV1ciBwYXIgZW1haWxcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzZXJzJylcbiAgICAgIC5zZWxlY3QoJ2lkLCBlbWFpbCwgbmFtZSwgcGFzc3dvcmQsIGF2YXRhcicpXG4gICAgICAuZXEoJ2VtYWlsJywgZW1haWwpXG4gICAgICAubWF5YmVTaW5nbGUoKTsgLy8gVXNpbmcgbWF5YmVTaW5nbGUgaW5zdGVhZCBvZiBzaW5nbGUgdG8gYXZvaWQgZXJyb3JzIHdoZW4gbm8gdXNlciBpcyBmb3VuZFxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdEYXRhYmFzZSBxdWVyeSByZXN1bHQ6JywgeyBkYXRhLCBlcnJvciB9KTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcXVlcnlpbmcgdXNlcjonLCBlcnJvcik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yIGR1cmluZyBhdXRoZW50aWNhdGlvbicpO1xuICAgIH1cblxuICAgIGlmICghZGF0YSkge1xuICAgICAgY29uc29sZS5sb2coJ05vIHVzZXIgZm91bmQgd2l0aCB0aGlzIGVtYWlsJyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHVzZXIgZm91bmQgd2l0aCB0aGlzIGVtYWlsJyk7XG4gICAgfVxuXG4gICAgLy8gVsOpcmlmaWVyIGxlIG1vdCBkZSBwYXNzZVxuICAgIGNvbnNvbGUubG9nKCdDb21wYXJpbmcgcGFzc3dvcmRzLi4uJyk7XG4gICAgY29uc3QgcGFzc3dvcmRNYXRjaCA9IGF3YWl0IGNvbXBhcmUocGFzc3dvcmQsIGRhdGEucGFzc3dvcmQpO1xuICAgIGNvbnNvbGUubG9nKCdQYXNzd29yZCBtYXRjaCByZXN1bHQ6JywgcGFzc3dvcmRNYXRjaCk7XG4gICAgXG4gICAgaWYgKCFwYXNzd29yZE1hdGNoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY3JlZGVudGlhbHMnKTtcbiAgICB9XG5cbiAgICAvLyBSZXRvdXJuZXIgbGVzIGluZm9ybWF0aW9ucyBkZSBsJ3V0aWxpc2F0ZXVyIHNhbnMgbGUgbW90IGRlIHBhc3NlXG4gICAgY29uc29sZS5sb2coJ0F1dGhlbnRpY2F0aW9uIHN1Y2Nlc3NmdWwgZm9yIHVzZXI6JywgZGF0YS5lbWFpbCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBkYXRhLmlkLFxuICAgICAgZW1haWw6IGRhdGEuZW1haWwsXG4gICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICBpbWFnZTogZGF0YS5hdmF0YXJcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0F1dGhlbnRpY2F0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgdGhyb3cgZXJyb3I7IC8vIFByb3BhZ2VyIGwnZXJyZXVyIGF2ZWMgbGUgbWVzc2FnZSBzcMOpY2lmaXF1ZVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0F1dGhlbnRpY2F0aW9uIGZhaWxlZCcpO1xuICB9XG59XG5cbi8qKlxuICogVHJvdXZlIG91IGNyw6llIHVuIHV0aWxpc2F0ZXVyIMOgIHBhcnRpciBkJ3VuIHByb2ZpbCBPQXV0aCAoR2l0SHViLCBHb29nbGUsIGV0Yy4pXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaW5kT3JDcmVhdGVPQXV0aFVzZXIocHJvZmlsZTogYW55LCBwcm92aWRlcjogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ1Byb2ZpbCBPQXV0aCByZcOndTonLCBKU09OLnN0cmluZ2lmeShwcm9maWxlLCBudWxsLCAyKSk7XG4gICAgY29uc29sZS5sb2coJ0ZvdXJuaXNzZXVyOicsIHByb3ZpZGVyKTtcbiAgICBcbiAgICAvLyBWw6lyaWZpZXIgcXVlIGxlIHByb2ZpbCBjb250aWVudCB1biBlbWFpbFxuICAgIGlmICghcHJvZmlsZS5lbWFpbCkge1xuICAgICAgY29uc29sZS5lcnJvcignUHJvZmlsIE9BdXRoIHNhbnMgZW1haWw6JywgSlNPTi5zdHJpbmdpZnkocHJvZmlsZSwgbnVsbCwgMikpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdMZSBwcm9maWwgT0F1dGggbmUgY29udGllbnQgcGFzIGRcXCdlbWFpbCcpO1xuICAgIH1cblxuICAgIC8vIEV4dHJhaXJlIGxlcyBpbmZvcm1hdGlvbnMgZHUgcHJvZmlsIGVuIGZvbmN0aW9uIGR1IGZvdXJuaXNzZXVyXG4gICAgbGV0IHVzZXJOYW1lID0gcHJvZmlsZS5uYW1lO1xuICAgIGxldCB1c2VySW1hZ2UgPSBwcm9maWxlLmltYWdlIHx8IHByb2ZpbGUucGljdHVyZSB8fCBwcm9maWxlLmF2YXRhcl91cmw7XG4gICAgXG4gICAgLy8gVHJhaXRlbWVudCBzcMOpY2lmaXF1ZSBwb3VyIEdvb2dsZVxuICAgIGlmIChwcm92aWRlciA9PT0gJ2dvb2dsZScpIHtcbiAgICAgIC8vIEdvb2dsZSBmb3Vybml0IHNvdXZlbnQgbGUgbm9tIGRhbnMgZGVzIHByb3ByacOpdMOpcyBzw6lwYXLDqWVzXG4gICAgICBpZiAocHJvZmlsZS5naXZlbl9uYW1lICYmIHByb2ZpbGUuZmFtaWx5X25hbWUpIHtcbiAgICAgICAgdXNlck5hbWUgPSBgJHtwcm9maWxlLmdpdmVuX25hbWV9ICR7cHJvZmlsZS5mYW1pbHlfbmFtZX1gO1xuICAgICAgfVxuICAgICAgLy8gR29vZ2xlIGZvdXJuaXQgbCdpbWFnZSBkYW5zIHByb2ZpbGUucGljdHVyZVxuICAgICAgdXNlckltYWdlID0gcHJvZmlsZS5waWN0dXJlIHx8IHVzZXJJbWFnZTtcbiAgICAgIGNvbnNvbGUubG9nKCdJbmZvcm1hdGlvbnMgZXh0cmFpdGVzIHBvdXIgR29vZ2xlOicsIHsgdXNlck5hbWUsIHVzZXJJbWFnZSwgZW1haWw6IHByb2ZpbGUuZW1haWwgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFRyYWl0ZW1lbnQgc3DDqWNpZmlxdWUgcG91ciBHaXRIdWJcbiAgICBpZiAocHJvdmlkZXIgPT09ICdnaXRodWInKSB7XG4gICAgICAvLyBHaXRIdWIgZm91cm5pdCBsJ2ltYWdlIGRhbnMgcHJvZmlsZS5hdmF0YXJfdXJsXG4gICAgICB1c2VySW1hZ2UgPSBwcm9maWxlLmF2YXRhcl91cmwgfHwgdXNlckltYWdlO1xuICAgICAgY29uc29sZS5sb2coJ0luZm9ybWF0aW9ucyBleHRyYWl0ZXMgcG91ciBHaXRIdWI6JywgeyB1c2VyTmFtZSwgdXNlckltYWdlLCBlbWFpbDogcHJvZmlsZS5lbWFpbCB9KTtcbiAgICB9XG5cbiAgICAvLyBWw6lyaWZpZXIgc2kgbCd1dGlsaXNhdGV1ciBleGlzdGUgZMOpasOgXG4gICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1VzZXIsIGVycm9yOiBzZWFyY2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAuc2VsZWN0KCdpZCwgZW1haWwsIG5hbWUsIGF2YXRhcicpXG4gICAgICAuZXEoJ2VtYWlsJywgcHJvZmlsZS5lbWFpbClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChzZWFyY2hFcnJvciAmJiBzZWFyY2hFcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7IC8vIFBHUlNUMTE2ID0gbm90IGZvdW5kXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJldXIgbG9ycyBkZSBsYSByZWNoZXJjaGUgZGUgbFxcJ3V0aWxpc2F0ZXVyOicsIHNlYXJjaEVycm9yKTtcbiAgICAgIHRocm93IHNlYXJjaEVycm9yO1xuICAgIH1cblxuICAgIC8vIFNpIGwndXRpbGlzYXRldXIgZXhpc3RlLCBsZSByZXRvdXJuZXJcbiAgICBpZiAoZXhpc3RpbmdVc2VyKSB7XG4gICAgICBjb25zb2xlLmxvZygnVXRpbGlzYXRldXIgZXhpc3RhbnQgdHJvdXbDqTonLCBleGlzdGluZ1VzZXIpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IGV4aXN0aW5nVXNlci5pZCxcbiAgICAgICAgZW1haWw6IGV4aXN0aW5nVXNlci5lbWFpbCxcbiAgICAgICAgbmFtZTogZXhpc3RpbmdVc2VyLm5hbWUsXG4gICAgICAgIGltYWdlOiBleGlzdGluZ1VzZXIuYXZhdGFyXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdDcsOpYXRpb24gZFxcJ3VuIG5vdXZlbCB1dGlsaXNhdGV1ciBPQXV0aCBhdmVjIGxlcyBkb25uw6llczonLCB7XG4gICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCxcbiAgICAgIG5hbWU6IHVzZXJOYW1lLFxuICAgICAgYXZhdGFyOiB1c2VySW1hZ2UsXG4gICAgICBwcm92aWRlclxuICAgIH0pO1xuXG4gICAgLy8gU2lub24sIGNyw6llciB1biBub3V2ZWwgdXRpbGlzYXRldXJcbiAgICBjb25zdCB7IGRhdGE6IG5ld1VzZXIsIGVycm9yOiBjcmVhdGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAuaW5zZXJ0KHtcbiAgICAgICAgZW1haWw6IHByb2ZpbGUuZW1haWwsXG4gICAgICAgIG5hbWU6IHVzZXJOYW1lIHx8IGAke3Byb3ZpZGVyfSBVc2VyYCxcbiAgICAgICAgYXZhdGFyOiB1c2VySW1hZ2UgfHwgbnVsbCxcbiAgICAgICAgLy8gUGFzIGRlIG1vdCBkZSBwYXNzZSBwb3VyIGxlcyB1dGlsaXNhdGV1cnMgT0F1dGhcbiAgICAgICAgcGFzc3dvcmQ6IG51bGwsXG4gICAgICAgIGlzX2FjdGl2ZTogdHJ1ZVxuICAgICAgfSlcbiAgICAgIC5zZWxlY3QoJ2lkLCBlbWFpbCwgbmFtZSwgYXZhdGFyJylcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChjcmVhdGVFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgY3LDqWF0aW9uIGRlIGxcXCd1dGlsaXNhdGV1cjonLCBjcmVhdGVFcnJvcik7XG4gICAgICB0aHJvdyBjcmVhdGVFcnJvcjtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnTm91dmVsIHV0aWxpc2F0ZXVyIGNyw6nDqSBhdmVjIHN1Y2PDqHM6JywgbmV3VXNlcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBuZXdVc2VyLmlkLFxuICAgICAgZW1haWw6IG5ld1VzZXIuZW1haWwsXG4gICAgICBuYW1lOiBuZXdVc2VyLm5hbWUsXG4gICAgICBpbWFnZTogbmV3VXNlci5hdmF0YXJcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBkYW5zIGZpbmRPckNyZWF0ZU9BdXRoVXNlcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn0iXSwibmFtZXMiOlsiY29tcGFyZSIsImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJzdXBhYmFzZSIsInZlcmlmeVVzZXJDcmVkZW50aWFscyIsImVtYWlsIiwicGFzc3dvcmQiLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwibWF5YmVTaW5nbGUiLCJFcnJvciIsInBhc3N3b3JkTWF0Y2giLCJpZCIsIm5hbWUiLCJpbWFnZSIsImF2YXRhciIsImZpbmRPckNyZWF0ZU9BdXRoVXNlciIsInByb2ZpbGUiLCJwcm92aWRlciIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1c2VyTmFtZSIsInVzZXJJbWFnZSIsInBpY3R1cmUiLCJhdmF0YXJfdXJsIiwiZ2l2ZW5fbmFtZSIsImZhbWlseV9uYW1lIiwiZXhpc3RpbmdVc2VyIiwic2VhcmNoRXJyb3IiLCJzaW5nbGUiLCJjb2RlIiwibmV3VXNlciIsImNyZWF0ZUVycm9yIiwiaW5zZXJ0IiwiaXNfYWN0aXZlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth/db-queries.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* harmony import */ var drizzle_orm_postgres_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm/postgres-js */ \"(rsc)/./node_modules/drizzle-orm/postgres-js/driver.js\");\n/* harmony import */ var postgres__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! postgres */ \"(rsc)/./node_modules/postgres/src/index.js\");\n\n\n\n// Read Supabase credentials from environment variables\nconst supabaseUrl = \"https://ffwfdogonvgzudzsdcri.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZmd2Zkb2dvbnZnenVkenNkY3JpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMzMTg1MDQsImV4cCI6MjA1ODg5NDUwNH0.dfUnoBwD56sgNINPI-tLAuaMJ7PuGPuQanAJ_YrwOGI\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_KEY;\n// Basic check to ensure environment variables are set\nif (!supabaseUrl) {\n    throw new Error(\"Supabase URL not found. Make sure NEXT_PUBLIC_SUPABASE_URL is set in your .env file.\");\n}\nif (!supabaseAnonKey) {\n    throw new Error(\"Supabase Anon Key not found. Make sure NEXT_PUBLIC_SUPABASE_ANON_KEY is set in your .env file.\");\n}\n// Create and export the Supabase client instance with anonymous key (for client-side)\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(supabaseUrl, supabaseAnonKey);\n// Create a Supabase client with service role key for server-side operations that need elevated privileges\nconst supabaseAdmin = supabaseServiceKey ? (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_1__.createClient)(supabaseUrl, supabaseServiceKey) : supabase;\n// Configuration pour Drizzle ORM avec PostgreSQL\nlet db;\n// Fonction pour configurer Drizzle\nfunction setupDrizzle() {\n    const databaseUrl = process.env.DATABASE_URL;\n    if (!databaseUrl) {\n        console.error(\"DATABASE_URL is not defined in environment variables\");\n        throw new Error(\"DATABASE_URL is not defined in environment variables\");\n    }\n    try {\n        // Créer un client PostgreSQL avec des options de connexion robustes\n        const client = (0,postgres__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(databaseUrl, {\n            max: 10,\n            idle_timeout: 20,\n            connect_timeout: 30,\n            prepare: false\n        });\n        // Créer une instance Drizzle\n        return (0,drizzle_orm_postgres_js__WEBPACK_IMPORTED_MODULE_2__.drizzle)(client);\n    } catch (error) {\n        console.error(\"Erreur lors de la configuration de Drizzle:\", error);\n        throw error;\n    }\n}\n// Initialiser Drizzle en environnement serveur uniquement\nif (true) {\n    try {\n        db = setupDrizzle();\n    } catch (error) {\n        console.error(\"Erreur lors de l'initialisation de Drizzle:\", error);\n        // Fournir une instance factice pour éviter les erreurs côté serveur\n        db = {};\n    }\n} else {}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXFEO0FBQ0g7QUFDbEI7QUFFaEMsdURBQXVEO0FBQ3ZELE1BQU1HLGNBQWNDLDBDQUFvQztBQUN4RCxNQUFNRyxrQkFBa0JILGtOQUF5QztBQUNqRSxNQUFNSyxxQkFBcUJMLFFBQVFDLEdBQUcsQ0FBQ0ssb0JBQW9CO0FBRTNELHNEQUFzRDtBQUN0RCxJQUFJLENBQUNQLGFBQWE7SUFDaEIsTUFBTSxJQUFJUSxNQUFNO0FBQ2xCO0FBQ0EsSUFBSSxDQUFDSixpQkFBaUI7SUFDcEIsTUFBTSxJQUFJSSxNQUFNO0FBQ2xCO0FBRUEsc0ZBQXNGO0FBQy9FLE1BQU1DLFdBQVdaLG1FQUFZQSxDQUFDRyxhQUFhSSxpQkFBaUI7QUFFbkUsMEdBQTBHO0FBQ25HLE1BQU1NLGdCQUFnQkoscUJBQ3pCVCxtRUFBWUEsQ0FBQ0csYUFBYU0sc0JBQzFCRyxTQUFTO0FBRWIsaURBQWlEO0FBQ2pELElBQUlFO0FBRUosbUNBQW1DO0FBQ25DLFNBQVNDO0lBQ1AsTUFBTUMsY0FBY1osUUFBUUMsR0FBRyxDQUFDWSxZQUFZO0lBRTVDLElBQUksQ0FBQ0QsYUFBYTtRQUNoQkUsUUFBUUMsS0FBSyxDQUFDO1FBQ2QsTUFBTSxJQUFJUixNQUFNO0lBQ2xCO0lBRUEsSUFBSTtRQUNGLG9FQUFvRTtRQUNwRSxNQUFNUyxTQUFTbEIsb0RBQVFBLENBQUNjLGFBQWE7WUFDbkNLLEtBQUs7WUFDTEMsY0FBYztZQUNkQyxpQkFBaUI7WUFDakJDLFNBQVM7UUFDWDtRQUVBLDZCQUE2QjtRQUM3QixPQUFPdkIsZ0VBQU9BLENBQUNtQjtJQUNqQixFQUFFLE9BQU9ELE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLCtDQUErQ0E7UUFDN0QsTUFBTUE7SUFDUjtBQUNGO0FBRUEsMERBQTBEO0FBQzFELElBQUksSUFBNkIsRUFBRTtJQUNqQyxJQUFJO1FBQ0ZMLEtBQUtDO0lBQ1AsRUFBRSxPQUFPSSxPQUFPO1FBQ2RELFFBQVFDLEtBQUssQ0FBQywrQ0FBK0NBO1FBQzdELG9FQUFvRTtRQUNwRUwsS0FBSyxDQUFDO0lBQ1I7QUFDRixPQUFPLEVBR047QUFFYSIsInNvdXJjZXMiOlsiL1VzZXJzL2NoYXJsZXMtaGVucnlub2FoL0Rlc2t0b3Avdml6aW9uL1Zpemlvbi9saWIvZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcbmltcG9ydCB7IGRyaXp6bGUgfSBmcm9tICdkcml6emxlLW9ybS9wb3N0Z3Jlcy1qcyc7XG5pbXBvcnQgcG9zdGdyZXMgZnJvbSAncG9zdGdyZXMnO1xuXG4vLyBSZWFkIFN1cGFiYXNlIGNyZWRlbnRpYWxzIGZyb20gZW52aXJvbm1lbnQgdmFyaWFibGVzXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZO1xuY29uc3Qgc3VwYWJhc2VTZXJ2aWNlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9LRVk7XG5cbi8vIEJhc2ljIGNoZWNrIHRvIGVuc3VyZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHNldFxuaWYgKCFzdXBhYmFzZVVybCkge1xuICB0aHJvdyBuZXcgRXJyb3IoXCJTdXBhYmFzZSBVUkwgbm90IGZvdW5kLiBNYWtlIHN1cmUgTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIGlzIHNldCBpbiB5b3VyIC5lbnYgZmlsZS5cIik7XG59XG5pZiAoIXN1cGFiYXNlQW5vbktleSkge1xuICB0aHJvdyBuZXcgRXJyb3IoXCJTdXBhYmFzZSBBbm9uIEtleSBub3QgZm91bmQuIE1ha2Ugc3VyZSBORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSBpcyBzZXQgaW4geW91ciAuZW52IGZpbGUuXCIpO1xufVxuXG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgU3VwYWJhc2UgY2xpZW50IGluc3RhbmNlIHdpdGggYW5vbnltb3VzIGtleSAoZm9yIGNsaWVudC1zaWRlKVxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXkpO1xuXG4vLyBDcmVhdGUgYSBTdXBhYmFzZSBjbGllbnQgd2l0aCBzZXJ2aWNlIHJvbGUga2V5IGZvciBzZXJ2ZXItc2lkZSBvcGVyYXRpb25zIHRoYXQgbmVlZCBlbGV2YXRlZCBwcml2aWxlZ2VzXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VBZG1pbiA9IHN1cGFiYXNlU2VydmljZUtleSBcbiAgPyBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlU2VydmljZUtleSlcbiAgOiBzdXBhYmFzZTtcblxuLy8gQ29uZmlndXJhdGlvbiBwb3VyIERyaXp6bGUgT1JNIGF2ZWMgUG9zdGdyZVNRTFxubGV0IGRiOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXR1cERyaXp6bGU+O1xuXG4vLyBGb25jdGlvbiBwb3VyIGNvbmZpZ3VyZXIgRHJpenpsZVxuZnVuY3Rpb24gc2V0dXBEcml6emxlKCkge1xuICBjb25zdCBkYXRhYmFzZVVybCA9IHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTDtcbiAgXG4gIGlmICghZGF0YWJhc2VVcmwpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiREFUQUJBU0VfVVJMIGlzIG5vdCBkZWZpbmVkIGluIGVudmlyb25tZW50IHZhcmlhYmxlc1wiKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJEQVRBQkFTRV9VUkwgaXMgbm90IGRlZmluZWQgaW4gZW52aXJvbm1lbnQgdmFyaWFibGVzXCIpO1xuICB9XG4gIFxuICB0cnkge1xuICAgIC8vIENyw6llciB1biBjbGllbnQgUG9zdGdyZVNRTCBhdmVjIGRlcyBvcHRpb25zIGRlIGNvbm5leGlvbiByb2J1c3Rlc1xuICAgIGNvbnN0IGNsaWVudCA9IHBvc3RncmVzKGRhdGFiYXNlVXJsLCB7XG4gICAgICBtYXg6IDEwLCAvLyBub21icmUgbWF4aW11bSBkZSBjb25uZXhpb25zIGRhbnMgbGUgcG9vbFxuICAgICAgaWRsZV90aW1lb3V0OiAyMCwgLy8gdGVtcHMgZCdpbmFjdGl2aXTDqSBhdmFudCBkZSBmZXJtZXIgdW5lIGNvbm5leGlvbiAoZW4gc2Vjb25kZXMpXG4gICAgICBjb25uZWN0X3RpbWVvdXQ6IDMwLCAvLyB0ZW1wcyBtYXhpbXVtIHBvdXIgw6l0YWJsaXIgdW5lIGNvbm5leGlvbiAoZW4gc2Vjb25kZXMpXG4gICAgICBwcmVwYXJlOiBmYWxzZSwgLy8gZMOpc2FjdGl2ZXIgbGEgcHLDqXBhcmF0aW9uIGRlcyByZXF1w6p0ZXMgcG91ciBwbHVzIGRlIGNvbXBhdGliaWxpdMOpXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ3LDqWVyIHVuZSBpbnN0YW5jZSBEcml6emxlXG4gICAgcmV0dXJuIGRyaXp6bGUoY2xpZW50KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbGEgY29uZmlndXJhdGlvbiBkZSBEcml6emxlOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gSW5pdGlhbGlzZXIgRHJpenpsZSBlbiBlbnZpcm9ubmVtZW50IHNlcnZldXIgdW5pcXVlbWVudFxuaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gIHRyeSB7XG4gICAgZGIgPSBzZXR1cERyaXp6bGUoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyZXVyIGxvcnMgZGUgbCdpbml0aWFsaXNhdGlvbiBkZSBEcml6emxlOlwiLCBlcnJvcik7XG4gICAgLy8gRm91cm5pciB1bmUgaW5zdGFuY2UgZmFjdGljZSBwb3VyIMOpdml0ZXIgbGVzIGVycmV1cnMgY8O0dMOpIHNlcnZldXJcbiAgICBkYiA9IHt9IGFzIFJldHVyblR5cGU8dHlwZW9mIHNldHVwRHJpenpsZT47XG4gIH1cbn0gZWxzZSB7XG4gIC8vIEZvdXJuaXIgdW5lIGluc3RhbmNlIGZhY3RpY2UgcG91ciBsZSBjw7R0w6kgY2xpZW50XG4gIGRiID0ge30gYXMgUmV0dXJuVHlwZTx0eXBlb2Ygc2V0dXBEcml6emxlPjtcbn1cblxuZXhwb3J0IHsgZGIgfTtcbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJkcml6emxlIiwicG9zdGdyZXMiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlU2VydmljZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfS0VZIiwiRXJyb3IiLCJzdXBhYmFzZSIsInN1cGFiYXNlQWRtaW4iLCJkYiIsInNldHVwRHJpenpsZSIsImRhdGFiYXNlVXJsIiwiREFUQUJBU0VfVVJMIiwiY29uc29sZSIsImVycm9yIiwiY2xpZW50IiwibWF4IiwiaWRsZV90aW1lb3V0IiwiY29ubmVjdF90aW1lb3V0IiwicHJlcGFyZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/next-auth","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/whatwg-url","vendor-chunks/@babel","vendor-chunks/oauth","vendor-chunks/preact","vendor-chunks/uuid","vendor-chunks/yallist","vendor-chunks/preact-render-to-string","vendor-chunks/cookie","vendor-chunks/webidl-conversions","vendor-chunks/oidc-token-hash","vendor-chunks/@panva","vendor-chunks/drizzle-orm","vendor-chunks/postgres"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprojects%2Fuser%2Froute&page=%2Fapi%2Fprojects%2Fuser%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprojects%2Fuser%2Froute.ts&appDir=%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fcharles-henrynoah%2FDesktop%2Fvizion%2FVizion&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();